

----SNAPSHOT----(27 May 2021 20:39:17) Portfolio2.image priorSource: 17414976!

----STARTUP---- (27 May 2021 20:43:19) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!


----End fileIn of /Users/juan.ferrino/Downloads/2021-1c-main 4/17-Portfolio 1/Portfolio-Solucion.st----!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 5/27/2021 20:43:43'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 5/27/2021 20:43:46'!
PASSED!

TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferTest category: 'Portfolio-Solucion' stamp: 'JPF 5/27/2021 20:46:12'!
TestCase subclass: #TransferTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 20:54:08'!
test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 20:54:30' prior: 50878022!
test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 20:55:57' prior: 50878032!
test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self assert: 50 equals: sourceAccount balance.
	self assert: 50 equals: targetAccount balance.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 20:56:14' prior: 50878043!
test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self assert: 50 equals: sourceAccount balance.
	self assert: 50 equals: targetAccount balance.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 20:56:19' prior: 50878059!
test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self assert: 50 equals: sourceAccount balance.
	self assert: 50 equals: targetAccount balance! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/27/2021 20:56:26'!
ERROR!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/27/2021 20:56:26'!
ERROR!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/27/2021 20:57:52'!
transfer: aSmallInteger to: aReceptiveAccount 
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/27/2021 21:03:19' prior: 50878100!
transfer: anAmount to: aReceptiveAccount 
	
	self register: (Withdraw for: anAmount).
	aReceptiveAccount register: (Deposit for: anAmount).
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/27/2021 21:03:32' prior: 50878106!
transfer: anAmount to: targetReceptiveAccount 
	
	self register: (Withdraw for: anAmount).
	targetReceptiveAccount register: (Deposit for: anAmount).
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/27/2021 21:03:41' prior: 50878114!
transfer: anAmount to: targetReceptiveAccount 
	
	self register: (Withdraw for: anAmount).
	targetReceptiveAccount register: (Deposit for: anAmount)
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/27/2021 21:03:43'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/27/2021 21:03:47'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/27/2021 21:07:25'!
test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self deny: (sourceAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Withdraw ]).
	self deny: (targetAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Deposit ]).! !

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/27/2021 21:07:29'!
FAILURE!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/27/2021 21:07:29'!
FAILURE!

AccountTransaction subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/27/2021 21:08:31'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:09:42' overrides: 50877827!
affectBalance: aBalance ! !

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/27/2021 21:11:28'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer methodsFor: 'value' stamp: 'JPF 5/27/2021 21:11:25' overrides: 50877823!
value

	^ value! !

AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value sourceReceptiveAccount targetReceptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/27/2021 21:12:21'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value sourceReceptiveAccount targetReceptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer class methodsFor: 'instance creation' stamp: 'JPF 5/27/2021 21:14:22'!
for: anAmount from: sourceReceptiveAccount to: targetReceptiveAccount
	
	^ self new initializeFor: anAmount from: sourceReceptiveAccount to: targetReceptiveAccount! !
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/27/2021 21:17:03'!
initializeFor: anAmount from: ddsourceReceptiveAccount  to: sstargetReceptiveAccount
	
	value _ anAmount.
	"source _ sourceReceptiveAccount.
	target _ targetReceptiveAccount"! !

AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value source target'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/27/2021 21:17:14'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value source target'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/27/2021 21:17:36' prior: 50878217!
initializeFor: anAmount from: sourceReceptiveAccount  to: targetReceptiveAccount
	
	value _ anAmount.
	source _ sourceReceptiveAccount.
	target _ targetReceptiveAccount! !
!Transfer methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:23:19' prior: 50878178 overrides: 50877827!
affectBalance: aBalance
! !
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/27/2021 21:23:57' prior: 50878239!
initializeFor: aValue from: sourceReceptiveAccount  to: targetReceptiveAccount
	
	value _ aValue.
	source _ sourceReceptiveAccount.
	target _ targetReceptiveAccount! !
!Transfer class methodsFor: 'instance creation' stamp: 'JPF 5/27/2021 21:24:11' prior: 50878209!
for: aValue from: sourceReceptiveAccount to: targetReceptiveAccount
	
	^ self new initializeFor: aValue from: sourceReceptiveAccount to: targetReceptiveAccount! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 5/27/2021 21:27:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 5/27/2021 21:27:38'!
PASSED!
!Deposit methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance for: anAccount 

	^aBalance + value ! !
!Transfer methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance for: anAccount 
! !
!Withdraw methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance for: anAccount 

	^aBalance - value! !
!AccountTransaction methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance for: anAccount 

	self subclassResponsibility ! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 5/27/2021 21:31:45' prior: 50877788 overrides: 50877593!
balance

	^transactions 
		inject: 0
		into: [ :currentBalance :transaction | transaction affectBalance: currentBalance for: self ]! !

!methodRemoval: Deposit #affectBalance: stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance

	^aBalance + value !

!methodRemoval: Transfer #affectBalance: stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance
!

!methodRemoval: Withdraw #affectBalance: stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance

	^aBalance - value!

!methodRemoval: AccountTransaction #affectBalance: stamp: 'JPF 5/27/2021 21:31:45'!
affectBalance: aBalance

	self subclassResponsibility !
!Transfer methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:33:11' prior: 50878358 overrides: 50878367!
affectBalance: aBalance for: anAccount

	source = anAccount ifTrue: [ ^ aBalance - value ].
! !
!Transfer methodsFor: 'balance' stamp: 'JPF 5/27/2021 21:33:35' prior: 50878397 overrides: 50878367!
affectBalance: aBalance for: anAccount

	source = anAccount ifTrue: [ ^ aBalance - value ].
	target = anAccount ifTrue: [ ^ aBalance + value ].
! !

!classRemoval: #Transfer stamp: 'JPF 5/27/2021 22:03:23'!
AccountTransaction subclass: #Transfer
	instanceVariableNames: 'value source target'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountTransaction methodsFor: 'balance' stamp: 'JPF 5/27/2021 22:04:24'!
affectBalance: aBalance  

	self subclassResponsibility ! !
!Deposit methodsFor: 'balance' stamp: 'JPF 5/27/2021 22:04:24' overrides: 50878418!
affectBalance: aBalance  

	^aBalance + value ! !
!Withdraw methodsFor: 'balance' stamp: 'JPF 5/27/2021 22:04:24' overrides: 50878418!
affectBalance: aBalance  

	^aBalance - value! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 5/27/2021 22:04:24' prior: 50878374 overrides: 50877593!
balance

	^transactions 
		inject: 0
		into: [ :currentBalance :transaction | transaction affectBalance: currentBalance ]! !

!methodRemoval: AccountTransaction #affectBalance:for: stamp: 'JPF 5/27/2021 22:04:24'!
affectBalance: aBalance for: anAccount 

	self subclassResponsibility !

!methodRemoval: Deposit #affectBalance:for: stamp: 'JPF 5/27/2021 22:04:24'!
affectBalance: aBalance for: anAccount 

	^aBalance + value !

!methodRemoval: Withdraw #affectBalance:for: stamp: 'JPF 5/27/2021 22:04:24'!
affectBalance: aBalance for: anAccount 

	^aBalance - value!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 5/27/2021 22:04:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 5/27/2021 22:04:31'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/27/2021 22:04:32'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/27/2021 22:04:32'!
FAILURE!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/27/2021 22:04:32'!
FAILURE!

----QUIT----(28 May 2021 08:01:44) Portfolio2.image priorSource: 17457628!

----STARTUP---- (30 May 2021 09:56:28) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!


AccountTransaction subclass: #TransferEntry
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferEntry category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:26:42'!
AccountTransaction subclass: #TransferEntry
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

AccountTransaction subclass: #TransferOutput
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferOutput category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:27:28'!
AccountTransaction subclass: #TransferOutput
	instanceVariableNames: 'value'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:28:20' prior: 50878122!
transfer: anAmount to: targetReceptiveAccount 
	
	self register: (TransferOutput for: anAmount).
	targetReceptiveAccount register: (TransferEntry for: anAmount)
	! !
!TransferOutput class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:29:34'!
for: aValue

	^ self new initializeFor: aValue! !
!TransferEntry class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:29:50'!
for: aValue

	^ self new initializeFor: aValue! !
!TransferOutput methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:30:13'!
initializeFor: aValue

	value := aValue ! !
!TransferEntry methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:30:22'!
initializeFor: aValue

	value := aValue ! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:31:29'!
ERROR!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:31:29'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:31:29'!
ERROR!
!TransferEntry methodsFor: 'balance' stamp: 'JPF 5/30/2021 10:32:00' overrides: 50878418!
affectBalance: aBalance  

	^aBalance + value ! !
!TransferOutput methodsFor: 'balance' stamp: 'JPF 5/30/2021 10:32:18' overrides: 50878418!
affectBalance: aBalance  

	^aBalance - value! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:32:22'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:32:22'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 10:36:49'!
test03TransferEntryAndTransferOutputShouldBelongToTheSameTransfer
	
	| sourceAccount targetAccount transferEntry transferOutput |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self deny: (sourceAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Withdraw ]).
	self deny: (targetAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Deposit ]).! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 10:41:30'!
test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry
	
	| sourceAccount targetAccount transfer |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ sourceAccount transfer: 50 to: targetAccount.
	
	self assert: (sourceAccount transactions anySatisfy: [ :transaction | transaction = transfer output ]).
	self assert: (targetAccount transactions anySatisfy: [ :transaction | transaction = transfer entry ]).! !

!methodRemoval: TransferTest #test03TransferEntryAndTransferOutputShouldBelongToTheSameTransfer stamp: 'JPF 5/30/2021 10:42:07'!
test03TransferEntryAndTransferOutputShouldBelongToTheSameTransfer
	
	| sourceAccount targetAccount transferEntry transferOutput |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self deny: (sourceAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Withdraw ]).
	self deny: (targetAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Deposit ]).!

Object subclass: #Transfer
	instanceVariableNames: 'value entry output'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:43:04'!
Object subclass: #Transfer
	instanceVariableNames: 'value entry output'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:43:07'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:43:07'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:43:07'!
ERROR!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:43:07'!
ERROR!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:45:13' prior: 50878583!
transfer: anAmount to: targetReceptiveAccount 
	
	| transfer |
	
	transfer _ Transfer for: anAmount.
	self register: transfer output.
	targetReceptiveAccount register: transfer entry
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:45:26' prior: 50878728!
transfer: anAmount to: targetReceptiveAccount 
	
	| transfer |
	
	transfer _ Transfer for: anAmount.
	self register: transfer output.
	targetReceptiveAccount register: transfer entry.
	
	^ transfer
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:45:40' prior: 50878737!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	transfer _ Transfer for: aValue.
	self register: transfer output.
	targetReceptiveAccount register: transfer entry.
	
	^ transfer
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:48:07' prior: 50878747!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	"self register: transfer output.
	targetReceptiveAccount register: transfer entry."
	
	^ transfer
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:48:28'!
ERROR!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:48:28'!
ERROR!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:48:28'!
ERROR!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:48:32'!
ERROR!
!Transfer class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:48:49'!
for: aSmallInteger from: aReceptiveAccount to: aReceptiveAccount3 
	"DO NOT FORGET TO RENAME COLLABORATORS AND REMOVE THIS COMMENT!!!!"
	self shouldBeImplemented.
	^self new initializeFor: aSmallInteger from: aReceptiveAccount to: aReceptiveAccount3 ! !
!Transfer class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:49:55' prior: 50878785!
for: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
 
	^ self new initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount! !

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:50:11'!
ERROR!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:50:33'!
Object subclass: #Transfer
	instanceVariableNames: 'value entry output sourceReceptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:50:33'!
Object subclass: #Transfer
	instanceVariableNames: 'value entry output sourceReceptiveAccount targetReceptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:50:33'!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount 
	self shouldBeImplemented.
	value := aValue.
	sourceReceptiveAccount := aSourceReceptiveAccount.
	targetReceptiveAccount := aTargetReceptiveAccount.! !
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:50:52' prior: 50878826!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount

	value := aValue.
	sourceReceptiveAccount := aSourceReceptiveAccount.
	targetReceptiveAccount := aTargetReceptiveAccount.! !
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:53:27' prior: 50878837!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount

	value := aValue.
	output := TransferOutput for: self.
	entry := TransferEntry for: self.
	
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 5/30/2021 10:53:53' prior: 50878757!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !
!Transfer methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:54:47' prior: 50878847!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount

	value := aValue.
	output := TransferOutput for: self.
	entry := TransferEntry for: self.
	
	aSourceReceptiveAccount register: output.
	aTargetReceptiveAccount register: entry.
	
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:55:54'!
ERROR!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:55:54'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:55:54'!
ERROR!
!TransferEntry class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:56:30' prior: 50878596!
for: aTransfer

	^ self new initializeFor: aTransfer! !
!TransferOutput class methodsFor: 'instance creation' stamp: 'JPF 5/30/2021 10:56:49' prior: 50878591!
for: aTransfer

	^ self new initializeFor: aTransfer! !

!classDefinition: #TransferOutput category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:57:14'!
AccountTransaction subclass: #TransferOutput
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferOutput methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 10:57:14' prior: 50878627 overrides: 50878418!
affectBalance: aBalance  

	^aBalance - transfer! !
!TransferOutput methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 10:57:14' prior: 50878600!
initializeFor: aValue

	transfer := aValue ! !
!TransferOutput methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:57:21' prior: 50878913!
initializeFor: aTransfer

	transfer := aTransfer ! !
!TransferEntry methodsFor: 'initialization' stamp: 'JPF 5/30/2021 10:57:33' prior: 50878604!
initializeFor: aTransfer

	value := aTransfer ! !

!classDefinition: #TransferEntry category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 10:57:39'!
AccountTransaction subclass: #TransferEntry
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferEntry methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 10:57:39' prior: 50878622 overrides: 50878418!
affectBalance: aBalance  

	^aBalance + transfer ! !
!TransferEntry methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 10:57:39' prior: 50878923!
initializeFor: aTransfer

	transfer := aTransfer ! !
!TransferEntry methodsFor: 'value' stamp: 'JPF 5/30/2021 10:58:13' overrides: 50877823!
value
	
	^ transfer value! !
!TransferOutput methodsFor: 'value' stamp: 'JPF 5/30/2021 10:58:43' overrides: 50877823!
value
	
	^ transfer value! !
!TransferOutput methodsFor: 'balance' stamp: 'JPF 5/30/2021 10:59:11' prior: 50878908 overrides: 50878418!
affectBalance: aBalance  

	^aBalance - self value! !
!TransferEntry methodsFor: 'balance' stamp: 'JPF 5/30/2021 10:59:18' prior: 50878937 overrides: 50878418!
affectBalance: aBalance  

	^aBalance + self value! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:59:25'!
ERROR!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 10:59:25'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 10:59:25'!
ERROR!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 10:59:32'!
ERROR!

Object subclass: #Transfer
	instanceVariableNames: 'value entry output'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #Transfer category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 11:00:12'!
Object subclass: #Transfer
	instanceVariableNames: 'value entry output'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 11:00:23'!
ERROR!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 11:00:23'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 11:00:23'!
ERROR!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 11:00:26'!
ERROR!
!Transfer methodsFor: 'value' stamp: 'JPF 5/30/2021 11:01:17' overrides: 16881508!
value

	^ value! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 11:01:19'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 11:01:19'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 11:01:19'!
ERROR!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 11:01:19'!
ERROR!
!Transfer methodsFor: 'entry output' stamp: 'JPF 5/30/2021 11:02:09'!
entry
	
	^ entry! !
!Transfer methodsFor: 'entry output' stamp: 'JPF 5/30/2021 11:02:21'!
output
	
	^ output! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/30/2021 11:02:25'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/30/2021 11:02:25'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/30/2021 11:02:25'!
PASSED!

TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountSummaryTest category: 'Portfolio-Solucion' stamp: 'JPF 5/30/2021 11:13:01'!
TestCase subclass: #AccountSummaryTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:14:58'!
test01ShouldInformBalance0ForAnAccountWithoutTransactions
	
	| account |
	
	account _ ReceptiveAccount new.! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:17:47' prior: 50879067!
test01ShouldInformBalance0ForAnAccountWithoutTransactions
	
	| account |
	
	account _ ReceptiveAccount new.
	
	self assert: (OrderedCollection with: 'Balance = 0') equals: account summary! !

!testRun: #AccountSummaryTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 11:17:52'!
ERROR!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 11:18:06'!
summary
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 11:18:41' prior: 50879087!
summary
	
		
	^ OrderedCollection with: 'Balance = 0'! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 5/30/2021 11:18:46' prior: 50879092!
summary
	
	^ OrderedCollection with: 'Balance = 0'! !

!testRun: #AccountSummaryTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 11:19:33'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:21:39'!
test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: (OrderedCollection with: 'Depósito por 100.' with: 'Balance = 50') equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:21:46' prior: 50879106!
test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: (OrderedCollection with: 'Depósito por 50.' with: 'Balance = 50') equals: account summary! !

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:21:57'!
FAILURE!

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:22:08'!
FAILURE!
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:35:43' prior: 50879097!
summary

	| balance summary |
	
	balance _ 0.
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | 'Depósito por ', transaction value ].
	
	^ OrderedCollection with: 'Balance = 0'! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:37:10' prior: 50879137!
summary

	| balance summary |
	
	balance _ 0.
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ', transaction value ].
	
	summary add: 'Balance = ', balance.
	
	^ OrderedCollection with: 'Balance = 0'! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:37:17' prior: 50879147!
summary

	| balance summary |
	
	balance _ 0.
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ', transaction value ].
	
	summary add: 'Balance = ', balance.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:37:33' prior: 50879158!
summary

	| balance summary |
	
	balance _ 0.
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ', transaction value, '.' ].
	
	summary add: 'Balance = ', balance.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:38:41' prior: 50879168!
summary

	| balance summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ', transaction value, '.'].
	
	summary add: 'Balance = ', self balance.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:38:59' prior: 50879178!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ', transaction value, '.'].
	
	summary add: 'Balance = ', self balance.
	
	^ summary! !

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:39:12'!
ERROR!

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:39:24'!
ERROR!
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:39:49' prior: 50879188!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ' , transaction value asString , '.'].
	
	summary add: 'Balance = ', self balance.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:40:02' prior: 50879206!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: 'Depósito por ' , transaction value asString , '.'].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:40:05'!
PASSED!

!testRun: #AccountSummaryTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 11:40:05'!
PASSED!

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:40:05'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:42:39'!
test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountA50DepositAnd50Withdraw
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:43:26'!
test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !

!methodRemoval: AccountSummaryTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 11:43:26'!
test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountA50DepositAnd50Withdraw
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary!
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:43:41'!
test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: (OrderedCollection with: 'Depósito por 50.' with: 'Balance = 50') equals: account summary! !

!methodRemoval: AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit stamp: 'JPF 5/30/2021 11:43:41'!
test02ShouldInformBalance50AndA50DepositForAnAccountA50Deposit
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: (OrderedCollection with: 'Depósito por 50.' with: 'Balance = 50') equals: account summary!

!testRun: #AccountSummaryTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 11:44:12'!
FAILURE!

!testRun: #AccountSummaryTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 11:44:12'!
FAILURE!
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:45:19' prior: 50879216!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | 
		(transaction isKindOf: Deposit) ifTrue: [ summary add: 'Depósito por ' , transaction value asString , '.' ].
		].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:45:54' prior: 50879317!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | 
		(transaction isKindOf: Deposit) ifTrue: [ summary add: 'Depósito por ' , transaction value asString , '.' ].
		(transaction isKindOf: Withdraw ) ifTrue: [ summary add: 'Extracción por ' , transaction value asString , '.' ].
		].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !

!testRun: #AccountSummaryTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 11:46:02'!
PASSED!

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 11:46:02'!
PASSED!

!testRun: #AccountSummaryTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 11:46:02'!
PASSED!
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:48:25'!
test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:48:33' prior: 50879358!
test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:49:09' prior: 50879374!
test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:50:17' prior: 50879390!
test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Balance = 0')
		equals: account summary! !
!AccountSummaryTest methodsFor: 'tests' stamp: 'JPF 5/30/2021 11:51:04' prior: 50879407!
test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !

!testRun: #AccountSummaryTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 11:51:10'!
FAILURE!
!ReceptiveAccount methodsFor: 'summary' stamp: 'JPF 5/30/2021 11:53:13' prior: 50879329!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | 
		(transaction isKindOf: Deposit) ifTrue: [ summary add: 'Depósito por ' , transaction value asString , '.' ].
		(transaction isKindOf: Withdraw ) ifTrue: [ summary add: 'Extracción por ' , transaction value asString , '.' ].
		(transaction isKindOf: TransferEntry ) ifTrue: [ summary add: 'Entrada por transferencia de ' , transaction value asString , '.' ].
		(transaction isKindOf: TransferOutput ) ifTrue: [ summary add: 'Salida por transferencia de ' , transaction value asString , '.' ].
		].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !

!testRun: #AccountSummaryTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 11:53:39'!
PASSED!

!testRun: #AccountSummaryTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 11:53:39'!
PASSED!

!testRun: #AccountSummaryTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 11:53:39'!
PASSED!

!testRun: #AccountSummaryTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 11:53:39'!
PASSED!

----SNAPSHOT----(30 May 2021 11:54:12) Portfolio2.image priorSource: 17500835!

!classRenamed: #AccountSummaryTest as: #ReportTest stamp: 'JPF 5/30/2021 11:54:52'!
Smalltalk renameClassNamed: #AccountSummaryTest as: #ReportTest!
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 11:57:35'!
test01ShouldInform0ForAnAccountWithoutTransfers
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: (OrderedCollection with: 'Balance = 0') equals: account summary! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 11:58:55' prior: 50879504!
test01ShouldInform0ForAnAccountWithoutTransfers
	
	| account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	self assert: 0 equals: account netTransferValue! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 11:58:59'!
ERROR!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 11:59:20'!
netTransferValue
	self shouldBeImplemented.! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 11:59:28' prior: 50879526!
netTransferValue
	
	^ 0! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 11:59:38'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:00:22'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:00:22'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:00:22'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:00:22'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:00:22'!
PASSED!
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 12:02:31'!
test02ShouldInform50ForAnAccountWithA50TransferEntry
	
	| account |
	
	account _ ReceptiveAccount new.
	
	self assert: 50 equals: account netTransferValue! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 12:03:15' prior: 50879560!
test02ShouldInform50ForAnAccountWithA50TransferEntry
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	account2 transfer: 50 to: account.
	
	self assert: 50 equals: account netTransferValue! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 12:03:44' prior: 50879569!
test02ShouldInform50ForAnAccountWithA50TransferEntry
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account register: (Withdraw for: 50).
	
	account2 _ ReceptiveAccount new.
	
	account2 transfer: 50 to: account.
	
	self assert: 50 equals: account netTransferValue! !

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:03:55'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:06:57' prior: 50879531!
netTransferValue

	| net |
	
	net _ 0.
	
	transactions do: [ :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ transaction affectBalance: net ].
		].! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:07:31' prior: 50879596!
netTransferValue

	| net |
	
	net _ 0.
	
	transactions do: [ :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ transaction affectBalance: net ].
		].
	
	^ net! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:08:02'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:08:02'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:08:02'!
FAILURE!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:08:02'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:08:02'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:08:02'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:08:02'!
FAILURE!

self value!
!TransferEntry methodsFor: 'balance' stamp: 'JPF 5/30/2021 12:11:41' prior: 50878961 overrides: 50878418!
affectBalance: aBalance  

	^aBalance + self value! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:13:23' prior: 50879605!
netTransferValue

	^ transactions inject: 0 into: [ :currentNet :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ transaction affectBalance: currentNet ].
		].! !

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:13:29'!
ERROR!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:13:47'!
FAILURE!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:13:47'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:13:47'!
ERROR!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:13:47'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:13:47'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:13:47'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:13:49'!
ERROR!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:14:35' prior: 50879649!
netTransferValue

	^ transactions inject: 0 into: [ :currentNet :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ transaction affectBalance: currentNet. currentNet. ].
		].! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:14:43'!
FAILURE!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:14:43'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:14:43'!
ERROR!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:14:43'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:14:43'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:14:43'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:14:45'!
ERROR!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:15:57' prior: 50879691!
netTransferValue

	^ transactions inject: 0 into: [ :currentNet :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ transaction affectBalance: currentNet].
		currentNet.
		].! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:16:17'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:16:17'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:16:17'!
FAILURE!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:16:17'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:16:17'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:16:17'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:16:17'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:17:48' prior: 50879729!
netTransferValue

	| net |
	
	net _ 0.

	transactions do: [  :transaction | 	
		(transaction isKindOf: TransferEntry ) ifTrue: [ net _ transaction affectBalance: net].
		].
	
	^ net! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:18:00'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:18:00'!
PASSED!
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 5/30/2021 12:18:58'!
test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput
	
	| account account2 |
	
	account _ ReceptiveAccount new.
	account register: (Withdraw for: 50).
	
	account2 _ ReceptiveAccount new.
	
	account2 transfer: 50 to: account.
	account transfer: 40 to: account2.
	
	self assert: 10 equals: account netTransferValue! !

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 5/30/2021 12:19:01'!
FAILURE!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/30/2021 12:19:38' prior: 50879768!
netTransferValue

	| net |
	
	net _ 0.

	transactions do: [  :transaction | 	
		(transaction isKindOf: TransferEntry) ifTrue: [ net _ transaction affectBalance: net].
		(transaction isKindOf: TransferOutput) ifTrue: [ net _ transaction affectBalance: net].
		].
	
	^ net! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/30/2021 12:20:05'!
PASSED!

----SNAPSHOT----(30 May 2021 12:21:42) Portfolio2.image priorSource: 17531073!

----QUIT----(31 May 2021 08:06:49) Portfolio2.image priorSource: 17542155!

----STARTUP---- (31 May 2021 20:01:47) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!

!TransferTest methodsFor: 'tests' stamp: 'JPF 5/31/2021 21:43:39'!
test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry
	
	| sourceAccount targetAccount transfer |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ sourceAccount transfer: 50 to: targetAccount.
	
	self assert: transfer output transfer equals: transfer entry transfer.! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:43:56'!
ERROR!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:43:56'!
ERROR!
!TransferOutput methodsFor: 'transfer' stamp: 'JPF 5/31/2021 21:44:14'!
transfer
	self shouldBeImplemented.
	^transfer! !
!TransferOutput methodsFor: 'transfer' stamp: 'JPF 5/31/2021 21:44:23' prior: 50879874!
transfer
	
	^transfer! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:44:32'!
ERROR!
!TransferEntry methodsFor: 'transfer' stamp: 'JPF 5/31/2021 21:44:43'!
transfer
	self shouldBeImplemented.
	^transfer! !
!TransferEntry methodsFor: 'transfer' stamp: 'JPF 5/31/2021 21:44:55' prior: 50879887!
transfer

	^transfer! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:44:59'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/31/2021 21:45:03'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/31/2021 21:45:03'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:45:03'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:45:03'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/31/2021 21:46:37' prior: 50879851!
test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry
	
	| sourceAccount targetAccount transfer |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ sourceAccount transfer: 50 to: targetAccount.
	
	self assert: transfer output transfer equals: transfer entry transfer.
	self assert: sourceAccount transactions first transfer equals: targetAccount transactions first transfer! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:46:40'!
ERROR!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:46:40'!
ERROR!
!TransferTest methodsFor: 'tests' stamp: 'JPF 5/31/2021 21:47:06' prior: 50879918!
test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry
	
	| sourceAccount targetAccount transfer |
	
	sourceAccount _ ReceptiveAccount new.
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ sourceAccount transfer: 50 to: targetAccount.
	
	self assert: transfer output transfer equals: transfer entry transfer.
	self assert: sourceAccount transactions first transfer equals: targetAccount transactions first transfer! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:47:09'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 5/31/2021 21:47:09'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 5/31/2021 21:47:09'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:47:09'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 5/31/2021 21:47:09'!
PASSED!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/31/2021 21:49:40' prior: 50879454!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | 
		"(transaction isKindOf: Deposit) ifTrue: [ summary add: 'Depósito por ' , transaction value asString , '.' ].
		(transaction isKindOf: Withdraw ) ifTrue: [ summary add: 'Extracción por ' , transaction value asString , '.' ].
		(transaction isKindOf: TransferEntry ) ifTrue: [ summary add: 'Entrada por transferencia de ' , transaction value asString , '.' ].
		(transaction isKindOf: TransferOutput ) ifTrue: [ summary add: 'Salida por transferencia de ' , transaction value asString , '.' ]."
		summary add: transaction lineForSummary
		].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !
!Deposit methodsFor: 'nil' stamp: 'JPF 5/31/2021 21:51:00'!
lineForSummary
	
	^ 'Depósito por ' , value asString , '.'! !
!Withdraw methodsFor: 'nil' stamp: 'JPF 5/31/2021 21:51:56'!
lineForSummary
	
	^ 'Extracción por ' , value asString , '.'! !
!TransferOutput methodsFor: 'nil' stamp: 'JPF 5/31/2021 21:52:43'!
lineForSummary
	
	^ 'Salida por transferencia de ' , transfer value asString , '.'! !
!TransferEntry methodsFor: 'nil' stamp: 'JPF 5/31/2021 21:53:47'!
lineForSummary
	
	^ 'Entrada por transferencia de ' , self value asString , '.'! !
!TransferOutput methodsFor: 'as yet unclassified' stamp: 'JPF 5/31/2021 21:53:56' prior: 50880017!
lineForSummary
	
	^ 'Salida por transferencia de ' , self value asString , '.'! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/31/2021 21:54:03'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 5/31/2021 21:54:07'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 5/31/2021 21:54:07'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 5/31/2021 21:54:07'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 5/31/2021 21:54:07'!
PASSED!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/31/2021 21:54:32' prior: 50879984!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction |
		summary add: transaction lineForSummary
		].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/31/2021 21:54:52' prior: 50880082!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: transaction lineForSummary ].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !

Object subclass: #SummaryVisitor
	instanceVariableNames: 'receptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 5/31/2021 21:58:16'!
Object subclass: #SummaryVisitor
	instanceVariableNames: 'receptiveAccount'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classRenamed: #SummaryVisitor as: #SummaryOperation stamp: 'JPF 5/31/2021 21:58:53'!
Smalltalk renameClassNamed: #SummaryVisitor as: #SummaryOperation!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 5/31/2021 22:02:20' prior: 50880092!
summary

	| summary |
	
	summary _ OrderedCollection new.
	
	transactions do: [ :transaction | summary add: transaction lineForSummary ].
	
	summary add: 'Balance = ', self balance asString.
	
	^ summary! !

----SNAPSHOT----(31 May 2021 22:14:20) Portfolio2.image priorSource: 17542235!

----QUIT----(31 May 2021 22:14:24) Portfolio2.image priorSource: 17551278!

----STARTUP---- (1 June 2021 18:24:43) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!

!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:36:02'!
test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount
	
	| sourceAccount targetAccount transfer |
	
	sourceAccount _ ReceptiveAccount new.
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ sourceAccount transfer: 50 to: targetAccount.
	
	self assert: transfer output transfer equals: transfer entry transfer.
	self assert: sourceAccount transactions first transfer equals: targetAccount transactions first transfer! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:36:07' prior: 50880136!
test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount
	
	| account targetAccount transfer |
	
	account _ ReceptiveAccount new.
	
	targetAccount _ ReceptiveAccount new.
	
	transfer _ account transfer: 50 to: targetAccount.
	
	self assert: transfer output transfer equals: transfer entry transfer.
	self assert: account transactions first transfer equals: targetAccount transactions first transfer! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:39:38' prior: 50880153!
test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount
	
	| account |
	
	account _ ReceptiveAccount new.
	
	self
		should: [ account transfer: 50 to: account ]	
		raise: Error
		description: ReceptiveAccount transferToSourceAccountErrorDescription.! !

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:39:43'!
ERROR!
!ReceptiveAccount class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 18:40:04'!
transferToSourceAccountErrorDescription
	self shouldBeImplemented.! !
!ReceptiveAccount class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 18:40:42' prior: 50880185!
transferToSourceAccountErrorDescription
	
	^ 'Cannot transfer to the source account'.! !

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:40:51'!
FAILURE!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:40:58'!
FAILURE!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:40:58'!
FAILURE!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:42:10' prior: 50878856!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	(targetReceptiveAccount = self) ifTrue: [ self error: self class transferToSourceAccountErrorDescription ].
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:42:15'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:42:15'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:42:15'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:42:15'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:42:15'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:43:10'!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| account |
	
	account _ ReceptiveAccount new.
	
	self
		should: [ account transfer: 50 to: account ]	
		raise: Error
		description: ReceptiveAccount transferToSourceAccountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:43:33' prior: 50880243!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	sourceAccount transfer: 50 to: targetAccount.
	
	self deny: (sourceAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Withdraw ]).
	self deny: (targetAccount transactions anySatisfy: [ :transaction | transaction isKindOf: Deposit ]).! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:44:05' prior: 50880254!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 50 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount transferToSourceAccountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:44:31' prior: 50880272!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 50 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount transferANegativeAmountErrorDescription.! !

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:44:35'!
ERROR!
!ReceptiveAccount class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 18:45:02'!
transferANegativeAmountErrorDescription
	self shouldBeImplemented.! !
!ReceptiveAccount class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 18:45:23' prior: 50880306!
transferANegativeAmountErrorDescription

	^ 'Cannot transfer a negative amount'! !

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:45:41'!
FAILURE!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:45:41'!
FAILURE!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:46:53' prior: 50880210!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	(targetReceptiveAccount = self) ifTrue: [ self error: self class transferToSourceAccountErrorDescription ].
	(aValue < 0) ifTrue: [ self error: self class transferANegativeAmountErrorDescription ].
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:46:59'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:46:59'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:46:59'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:46:59'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:46:59'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:46:59'!
FAILURE!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:46:59'!
FAILURE!
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:47:12' prior: 50880287!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: -1 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount transferANegativeAmountErrorDescription.! !

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:47:15'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:47:45'!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: -1 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount transferANegativeAmountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:47:56' prior: 50880414!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 0 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount transferANegativeAmountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:48:20' prior: 50880429!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 0 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount invalidAmountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:48:34' prior: 50880444!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	"| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 0 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount invalidAmountErrorDescription."! !
!ReceptiveAccount class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 18:49:46'!
invalidAmountErrorDescription

	^ 'Cannot transfer a negative amount'! !
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:49:46' prior: 50880326!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	(targetReceptiveAccount = self) ifTrue: [ self error: self class transferToSourceAccountErrorDescription ].
	(aValue < 0) ifTrue: [ self error: self class invalidAmountErrorDescription ].
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !
!TransferTest methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:49:46' prior: 50880370!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: -1 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount invalidAmountErrorDescription.! !

!methodRemoval: ReceptiveAccount class #transferANegativeAmountErrorDescription stamp: 'JPF 6/1/2021 18:49:46'!
transferANegativeAmountErrorDescription

	^ 'Cannot transfer a negative amount'!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/1/2021 18:50:00'!
PASSED!
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 18:50:10' prior: 50880458!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 0 to: targetAccount ]	
		raise: Error
		description: ReceptiveAccount invalidAmountErrorDescription.! !

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/1/2021 18:50:12'!
FAILURE!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:50:27' prior: 50880479!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	(targetReceptiveAccount = self) ifTrue: [ self error: self class transferToSourceAccountErrorDescription ].
	(aValue <= 0) ifTrue: [ self error: self class invalidAmountErrorDescription ].
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/1/2021 18:50:34'!
PASSED!
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:51:49'!
assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount

	^ (targetReceptiveAccount = self) ifTrue: [ self error: self class transferToSourceAccountErrorDescription ]! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:51:49' prior: 50880562!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	self assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount.
	(aValue <= 0) ifTrue: [ self error: self class invalidAmountErrorDescription ].
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:52:33'!
assertTheAmountTransferedIsValid: aValue

	^ (aValue <= 0) ifTrue: [ self error: self class invalidAmountErrorDescription ]! !
!ReceptiveAccount methodsFor: 'transfer' stamp: 'JPF 6/1/2021 18:52:33' prior: 50880614!
transfer: aValue to: targetReceptiveAccount 
	
	| transfer |
	
	self assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount.
	self assertTheAmountTransferedIsValid: aValue.
	
	transfer _ Transfer for: aValue from: self to: targetReceptiveAccount.
	
	^ transfer
	! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/1/2021 18:53:00'!
PASSED!

!classRenamed: #SummaryOperation as: #SummaryVisitor stamp: 'JPF 6/1/2021 18:53:51'!
Smalltalk renameClassNamed: #SummaryOperation as: #SummaryVisitor!
!SummaryVisitor methodsFor: 'no messages' stamp: 'JPF 6/1/2021 18:54:59'!
visit: anAccount
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:58:06' prior: 50880680!
visit: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:58:14'!
visitAccount: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	
	! !

!methodRemoval: SummaryVisitor #visit: stamp: 'JPF 6/1/2021 18:58:14'!
visit: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	
	!

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 18:59:14'!
Object subclass: #SummaryVisitor
	instanceVariableNames: 'receptiveAccount summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:59:12' prior: 50880691!
visitAccount: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	summary add: ''
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:59:44' prior: 50880712!
visitAccount: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 18:59:59' prior: 50880720!
visitAccount: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:00:39'!
summaryOf: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary
	
	
	! !

!methodRemoval: SummaryVisitor #visitAccount: stamp: 'JPF 6/1/2021 19:00:39'!
visitAccount: anAccount

	anAccount transactions do: [ :transaction |
		self visitTransaction: transaction.
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary
	
	
	!
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:01:51' prior: 50880738!
summaryOf: anAccount

	anAccount transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary
	
	
	! !
!AccountTransaction methodsFor: 'visitor' stamp: 'JPF 6/1/2021 19:03:18'!
accept: aVisitor
	
	self subclassResponsibility ! !
!Deposit methodsFor: 'visitor' stamp: 'JPF 6/1/2021 19:03:54' overrides: 50880764!
accept: aVisitor
	
	aVisitor visitADeposit: self! !
!TransferEntry methodsFor: 'visitor' stamp: 'JPF 6/1/2021 19:04:18' overrides: 50880764!
accept: aVisitor
	
	aVisitor visitATransferEntry: self! !
!TransferOutput methodsFor: 'visitor' stamp: 'JPF 6/1/2021 19:04:39' overrides: 50880764!
accept: aVisitor
	
	aVisitor visitATransferOutput: self! !
!Withdraw methodsFor: 'visitor' stamp: 'JPF 6/1/2021 19:04:54' overrides: 50880764!
accept: aVisitor
	
	aVisitor visitAWithdraw: self! !
!SummaryVisitor methodsFor: 'nil' stamp: 'JPF 6/1/2021 19:05:20'!
visitADeposit: aDeposit
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:05:57' prior: 50880788!
visitADeposit: aDeposit
	
	^ 'Depósito por ' , aDeposit value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:06:31'!
visitAWithdraw: aWithdraw
	
	^ 'Depósito por ' , aWithdraw value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:06:47' prior: 50880799!
visitAWithdraw: aWithdraw
	
	^ 'Extracción por ' , aWithdraw value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:07:02'!
visitATransferOutput: aWithdraw
	
	^ 'Extracción por ' , aWithdraw value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:07:13' prior: 50880811!
visitATransferOutput: aTransferOutput
	
	^ 'Extracción por ' , aTransferOutput value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:07:36' prior: 50880817!
visitATransferOutput: aTransferOutput
	
	^ 'Salida por transferencia de ' , aTransferOutput value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:07:53'!
visitATransferEntry: aTransferOutput
	
	^ 'Salida por transferencia de ' , aTransferOutput value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:07:59' prior: 50880831!
visitATransferEntry: aTransferEntry
	
	^ 'Salida por transferencia de ' , aTransferEntry value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:08:09' prior: 50880838!
visitATransferEntry: aTransferEntry
	
	^ 'Entrada por transferencia de ' , aTransferEntry value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:08:32' prior: 50880793!
visitADeposit: aDeposit
	
	summary add: 'Depósito por ' , aDeposit value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:08:43' prior: 50880845!
visitATransferEntry: aTransferEntry
	
	summary add: 'Entrada por transferencia de ' , aTransferEntry value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:08:48' prior: 50880824!
visitATransferOutput: aTransferOutput
	
	summary add: 'Salida por transferencia de ' , aTransferOutput value asString , '.'! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:08:54' prior: 50880805!
visitAWithdraw: aWithdraw
	
	summary add: 'Extracción por ' , aWithdraw value asString , '.'! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 6/1/2021 19:17:20' prior: 50880119!
summary

	^ (SummaryVisitor for: self) summary
! !
!SummaryVisitor class methodsFor: 'instance creation' stamp: 'JPF 6/1/2021 19:18:39'!
for: anAccount
	
	^ self new initializeFor: anAccount! !

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 19:19:34'!
Object subclass: #SummaryVisitor
	instanceVariableNames: 'receptiveAccount summary account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!SummaryVisitor methodsFor: 'initialization' stamp: 'JPF 6/1/2021 19:19:32'!
initializeFor: anAccount
	
	account := anAccount.
	summary := OrderedCollection new! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:20:00' prior: 50880756!
summaryOf: anAccount

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', anAccount balance asString.
	
	^ summary
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:20:37' prior: 50880903!
summaryOf: anAccount

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:20:54'!
summaryOf

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !

!methodRemoval: SummaryVisitor #summaryOf: stamp: 'JPF 6/1/2021 19:20:54'!
summaryOf: anAccount

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	!
!SummaryVisitor methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:21:02'!
summary

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !

!methodRemoval: SummaryVisitor #summaryOf stamp: 'JPF 6/1/2021 19:21:02'!
summaryOf

	account transactions do: [ :transaction |
		transaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 19:21:12'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 19:21:21'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 19:21:21'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 19:21:21'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 19:21:21'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/1/2021 19:21:23'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/1/2021 19:21:23'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/1/2021 19:21:23'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 19:21:25'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 19:21:25'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 19:21:25'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 19:21:25'!
PASSED!

TestCase subclass: #TransactionIteratorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransactionIteratorTest category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 19:31:05'!
TestCase subclass: #TransactionIteratorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:33:37'!
test01IteratorForAnAccountWithoutTransactionsHasNotNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionsIterator.! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:34:08' prior: 50881042!
test01IteratorForAnAccountWithoutTransactionsHasNotNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionsIterator.
	
	self deny: iterator hasNext! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNextValue stamp: 'JPF 6/1/2021 19:34:16'!
ERROR!
!ReceptiveAccount methodsFor: 'transactions iterator' stamp: 'JPF 6/1/2021 19:34:36'!
transactionsIterator
	self shouldBeImplemented.! !

!classDefinition: #TransactionsIterator category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 19:35:37'!
Object subclass: #TransactionsIterator
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!ReceptiveAccount methodsFor: 'transactions iterator' stamp: 'JPF 6/1/2021 19:35:24' prior: 50881063!
transactionsIterator
	
	^ TransactionsIterator new! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNextValue stamp: 'JPF 6/1/2021 19:35:45'!
ERROR!
!TransactionsIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 19:36:04'!
hasNext
	self shouldBeImplemented.! !
!TransactionsIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 19:36:19' prior: 50881085!
hasNext
	
	^ false! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNextValue stamp: 'JPF 6/1/2021 19:36:27'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNextValue stamp: 'JPF 6/1/2021 19:36:27'!
PASSED!

!classRenamed: #TransactionsIterator as: #TransactionIterator stamp: 'JPF 6/1/2021 19:37:27'!
Smalltalk renameClassNamed: #TransactionsIterator as: #TransactionIterator!
!ReceptiveAccount methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:37:27' prior: 50881076!
transactionsIterator
	
	^ TransactionIterator new! !
!ReceptiveAccount methodsFor: 'transaction iterator' stamp: 'JPF 6/1/2021 19:38:42'!
transactionIterator
	
	^ TransactionIterator new! !
!TransactionIteratorTest methodsFor: 'as yet unclassified' stamp: 'JPF 6/1/2021 19:38:42' prior: 50881050!
test01IteratorForAnAccountWithoutTransactionsHasNotNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionIterator.
	
	self deny: iterator hasNext! !

!methodRemoval: ReceptiveAccount #transactionsIterator stamp: 'JPF 6/1/2021 19:38:42'!
transactionsIterator
	
	^ TransactionIterator new!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 19:40:11'!
PASSED!

----SNAPSHOT----(1 June 2021 19:40:18) Portfolio2.image priorSource: 17551358!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:41:34'!
test02IteratorForAnAccountWithOneTransactinHasNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionIterator.
	
	self deny: iterator hasNext! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:41:48' prior: 50881163!
test02IteratorForAnAccountWithOneTransactinHasNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionIterator.
	
	self assert: iterator hasNext! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:42:27' prior: 50881172!
test02IteratorForAnAccountWithOneTransactinHasNextValue
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:42:49' prior: 50881181!
test02IteratorForAnAccountWithOneTransactinHasNextValue
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:43:04'!
test02IteratorForAnAccountWithOneTransactionHasNextValue
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext! !

!methodRemoval: TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactinHasNextValue stamp: 'JPF 6/1/2021 19:43:04'!
test02IteratorForAnAccountWithOneTransactinHasNextValue
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNextValue stamp: 'JPF 6/1/2021 19:43:53'!
FAILURE!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNextValue stamp: 'JPF 6/1/2021 19:43:53'!
FAILURE!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:44:36'!
test02IteratorForAnAccountWithOneTransactionHasNext
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext! !

!methodRemoval: TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNextValue stamp: 'JPF 6/1/2021 19:44:36'!
test02IteratorForAnAccountWithOneTransactionHasNextValue
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	
	self assert: iterator hasNext!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:44:44'!
test01IteratorForAnAccountWithoutTransactionsHasNotNext
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionIterator.
	
	self deny: iterator hasNext! !

!methodRemoval: TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNextValue stamp: 'JPF 6/1/2021 19:44:44'!
test01IteratorForAnAccountWithoutTransactionsHasNotNextValue
	
	| iterator |
	
	iterator _ (ReceptiveAccount new) transactionIterator.
	
	self deny: iterator hasNext!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:44:49'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 19:44:49'!
FAILURE!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 19:44:49'!
FAILURE!

!classDefinition: #TransactionIterator category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 19:46:07'!
Object subclass: #TransactionIterator
	instanceVariableNames: 'transactions'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransactionIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 19:46:04' prior: 50881090!
hasNext
	
	^ transactions isNotEmpty! !
!TransactionIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 19:46:42' prior: 50881289!
hasNext
	
	^ transactions isEmpty not! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:46:59'!
ERROR!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 19:46:59'!
ERROR!
!ReceptiveAccount methodsFor: 'transaction iterator' stamp: 'JPF 6/1/2021 19:47:58' prior: 50881113!
transactionIterator
	
	^ TransactionIterator with: transactions! !
!ReceptiveAccount methodsFor: 'transaction iterator' stamp: 'JPF 6/1/2021 19:48:07' prior: 50881307!
transactionIterator
	
	^ TransactionIterator with: self transactions! !
!TransactionIterator class methodsFor: 'instance creation' stamp: 'JPF 6/1/2021 19:49:38'!
with: transactions
	
	^ self new initializeWith: transactions! !
!TransactionIterator methodsFor: 'initialization' stamp: 'JPF 6/1/2021 19:50:25'!
initializeWith: transactionCollection
	
	transactions _ transactionCollection ! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:50:30'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 19:50:30'!
PASSED!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 19:53:22'!
test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce
	
	| iterator account |
	
	account _ ReceptiveAccount new.
	account register: (Deposit for: 50).
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext! !

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 19:53:25'!
ERROR!
!TransactionIterator methodsFor: 'iteration' stamp: 'JPF 6/1/2021 19:53:52'!
next
	self shouldBeImplemented.! !

!classDefinition: #TransactionIterator category: 'Portfolio-Solucion' stamp: 'JPF 6/1/2021 19:55:12'!
Object subclass: #TransactionIterator
	instanceVariableNames: 'transactions index'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransactionIterator methodsFor: 'iteration' stamp: 'JPF 6/1/2021 19:55:10' prior: 50881354!
next
	index _ index + 1! !
!TransactionIterator methodsFor: 'initialization' stamp: 'JPF 6/1/2021 19:55:56' prior: 50881324!
initializeWith: transactionCollection
	
	transactions _ transactionCollection.
	index _ 0! !
!TransactionIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 19:56:43' prior: 50881294!
hasNext
	
	^ transactions size <= index! !

collection _ OrderedCollection with: 1!

collection at: 1!

collection at: 0!

collection at: 2!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:58:52'!
FAILURE!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:58:52'!
FAILURE!
!TransactionIterator methodsFor: 'initialization' stamp: 'JPF 6/1/2021 19:59:37' prior: 50881371!
initializeWith: transactionCollection
	
	transactions _ transactionCollection.
	index _ 1! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:59:42'!
FAILURE!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 19:59:42'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 19:59:42'!
FAILURE!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 19:59:50'!
FAILURE!

transactions size!
!TransactionIterator methodsFor: 'testing' stamp: 'JPF 6/1/2021 20:01:08' prior: 50881377!
hasNext
	
	^ index <= transactions size! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:01:12'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:01:16'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:01:16'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:01:16'!
PASSED!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:04:17'!
test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:04:50' prior: 50881438!
test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	
	self assert: transaction equals: iterator next! !

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:04:56'!
FAILURE!
!TransactionIterator methodsFor: 'next' stamp: 'JPF 6/1/2021 20:06:16' prior: 50881367!
next
	
	| currentTransaction |
	
	currentTransaction _ transactions at: index.
	index _ index + 1! !
!TransactionIterator methodsFor: 'next' stamp: 'JPF 6/1/2021 20:06:34' prior: 50881469!
next
	
	| currentTransaction |
	
	currentTransaction _ transactions at: index.
	index _ index + 1.
	
	^ currentTransaction
	
	! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:06:48'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:06:48'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:06:48'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:06:48'!
PASSED!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:09:26'!
test05NextShouldRaiseAnErrorWhenHasNotNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext.
	self assert: transaction equals: iterator next! !
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:10:45' prior: 50881500!
test05NextShouldRaiseAnErrorWhenHasNotNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext.
	self should: [ iterator next ] raise: Error description: TransactionIterator notNextTransationErrorDescription.! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:10:47'!
ERROR!
!TransactionIterator class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 20:11:05'!
notNextTransationErrorDescription
	self shouldBeImplemented.! !
!TransactionIterator class methodsFor: 'error descriptions' stamp: 'JPF 6/1/2021 20:11:34' prior: 50881532!
notNextTransationErrorDescription
	
	^ 'Cannot ask for next when iterator has not next'! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:11:38'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:11:53'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:11:56'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:11:56'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:11:56'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:11:56'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:11:56'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:12:20'!
PASSED!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:13:59' prior: 50881513!
test05NextShouldRaiseAnErrorWhenHasNotNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext.
	self should: [ iterator next ] raise: Error - MessageNotUnderstood description: TransactionIterator notNextTransationErrorDescription.! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:14:03'!
PASSED!
!TransactionIteratorTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:14:44' prior: 50881599!
test05NextShouldRaiseAnErrorWhenHasNotNext
	
	| iterator account transaction |
	
	account _ ReceptiveAccount new.
	transaction _ Deposit for: 50.
	account register: transaction.
	
	iterator _ account transactionIterator.
	iterator next.
	
	self deny: iterator hasNext.
	self should: [ iterator next ] raise: Error - MessageNotUnderstood withMessageText: TransactionIterator notNextTransationErrorDescription.
	! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:14:47'!
FAILURE!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:14:47'!
FAILURE!
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:15:36' prior: 50880543!
test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: 0 to: targetAccount ]	
		raise: Error
		withMessageText: ReceptiveAccount invalidAmountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:15:43' prior: 50880493!
test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount
	
	| sourceAccount targetAccount |
	
	sourceAccount _ ReceptiveAccount new.
	sourceAccount register: (Deposit for: 100).
	
	targetAccount _ ReceptiveAccount new.
	
	self
		should: [ sourceAccount transfer: -1 to: targetAccount ]	
		raise: Error
		withMessageText: ReceptiveAccount invalidAmountErrorDescription.! !
!TransferTest methodsFor: 'tests' stamp: 'JPF 6/1/2021 20:15:52' prior: 50880169!
test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount
	
	| account |
	
	account _ ReceptiveAccount new.
	
	self
		should: [ account transfer: 50 to: account ]	
		raise: Error
		withMessageText: ReceptiveAccount transferToSourceAccountErrorDescription.! !

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/1/2021 20:15:58'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:16:23'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:16:23'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:16:23'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:16:23'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:16:23'!
FAILURE!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:16:23'!
FAILURE!
!TransactionIterator methodsFor: 'next' stamp: 'JPF 6/1/2021 20:19:25' prior: 50881475!
next
	
	| currentTransaction |
	
	(self hasNext) ifFalse: [ self error: self class notNextTransationErrorDescription ].
	
	currentTransaction _ transactions at: index.
	index _ index + 1.
	
	^ currentTransaction
	
	! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:19:30'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:19:30'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:19:30'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:19:30'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:19:30'!
PASSED!
!TransactionIterator methodsFor: 'next' stamp: 'JPF 6/1/2021 20:19:54'!
assertHasNext

	^ (self hasNext) ifFalse: [ self error: self class notNextTransationErrorDescription ]! !
!TransactionIterator methodsFor: 'next' stamp: 'JPF 6/1/2021 20:19:54' prior: 50881740!
next
	
	| currentTransaction |
	
	self assertHasNext.
	
	currentTransaction _ transactions at: index.
	index _ index + 1.
	
	^ currentTransaction
	
	! !

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/1/2021 20:19:59'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/1/2021 20:19:59'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/1/2021 20:19:59'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/1/2021 20:19:59'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/1/2021 20:19:59'!
PASSED!
!SummaryVisitor methodsFor: 'operation' stamp: 'JPF 6/1/2021 20:23:00' prior: 50880937!
summary

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	(transactionIterator hasNext) whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/1/2021 20:23:11'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 20:23:11'!
ERROR!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/1/2021 20:23:11'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 20:23:11'!
ERROR!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/1/2021 20:23:11'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 20:23:11'!
ERROR!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 20:23:11'!
ERROR!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 20:23:25'!
ERROR!
!SummaryVisitor methodsFor: 'operation' stamp: 'JPF 6/1/2021 20:24:04' prior: 50881808!
summary

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 20:24:11'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/1/2021 20:24:15'!
PASSED!

----SNAPSHOT----(1 June 2021 20:27:11) Portfolio2.image priorSource: 17584294!

----QUIT----(1 June 2021 20:27:46) Portfolio2.image priorSource: 17608017!

----STARTUP---- (1 June 2021 20:27:59) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!


----QUIT----(1 June 2021 20:29:37) Portfolio2.image priorSource: 17608097!

----STARTUP---- (2 June 2021 18:26:49) as /Users/juan.ferrino/CuisUniversity/Portfolio2.image!

!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:36:37'!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: {}.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:37:03' prior: 50881915!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:37:13' prior: 50881939!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:37:53' prior: 50881963!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account2 transfer: 50 to: account.
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:38:37' prior: 50881987!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: account summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:39:01' prior: 50882013!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 50).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 0')
		equals: portfolio summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:39:18' prior: 50882038!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 50.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 50')
		equals: portfolio summary! !
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:39:43' prior: 50882063!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Depósito por 100.'
			with: 'Extracción por 50.'
			with: 'Entrada por transferencia de 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 50')
		equals: portfolio summary! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:39:55'!
ERROR!
!Portfolio methodsFor: 'report' stamp: 'JPF 6/2/2021 18:40:15'!
summary
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'report' stamp: 'JPF 6/2/2021 18:41:31' prior: 50882118!
summary

	^ (SummaryVisitor for: self transactions) summary! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:41:36'!
ERROR!
!Portfolio methodsFor: 'report' stamp: 'JPF 6/2/2021 18:43:07' prior: 50882122!
summary

	^ (SummaryVisitor for: self) summary! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:43:18'!
ERROR!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:43:18'!
ERROR!
!Portfolio methodsFor: 'transaction iterator' stamp: 'JPF 6/2/2021 18:43:43'!
transactionIterator
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'transaction iterator' stamp: 'JPF 6/2/2021 18:45:13' prior: 50882147!
transactionIterator
	
	^ TransactionIterator with: self transactions! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:45:19'!
FAILURE!

portfolio summary!
!ReportTest methodsFor: 'account summary tests' stamp: 'JPF 6/2/2021 18:48:13' prior: 50882088!
test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Entrada por transferencia de 50.'
			with: 'Depósito por 100.'
			with: 'Extracción por 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 50')
		equals: portfolio summary! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:48:17'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:48:30'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 18:48:33'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 18:48:33'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 18:48:33'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 18:48:33'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:48:33'!
PASSED!
!Account methodsFor: 'report' stamp: 'JPF 6/2/2021 18:50:04'!
summary

	^ (SummaryVisitor for: self) summary! !

!methodRemoval: Portfolio #summary stamp: 'JPF 6/2/2021 18:50:04'!
summary

	^ (SummaryVisitor for: self) summary!
!Account methodsFor: 'transaction iterator' stamp: 'JPF 6/2/2021 18:50:21'!
transactionIterator
	
	^ TransactionIterator with: self transactions! !

!methodRemoval: Portfolio #transactionIterator stamp: 'JPF 6/2/2021 18:50:21'!
transactionIterator
	
	^ TransactionIterator with: self transactions!

!methodRemoval: ReceptiveAccount #summary stamp: 'JPF 6/2/2021 18:51:27'!
summary

	^ (SummaryVisitor for: self) summary
!

!methodRemoval: ReceptiveAccount #transactionIterator stamp: 'JPF 6/2/2021 18:51:39'!
transactionIterator
	
	^ TransactionIterator with: self transactions!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 18:52:13'!
PASSED!

Object subclass: #SummaryVisitor
	instanceVariableNames: 'summary account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 18:56:27'!
Object subclass: #SummaryVisitor
	instanceVariableNames: 'summary account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 18:56:33'!
PASSED!

Object subclass: #NetTransferValueVisitor
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #NetTransferValueVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 18:57:03'!
Object subclass: #NetTransferValueVisitor
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!NetTransferValueVisitor class methodsFor: 'nil' stamp: 'JPF 6/2/2021 18:58:14'!
for: anAccount
	
	^ self new initializeFor: anAccount! !

!classDefinition: #NetTransferValueVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 18:59:52'!
Object subclass: #NetTransferValueVisitor
	instanceVariableNames: 'account netTransferValue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!NetTransferValueVisitor methodsFor: 'initialization' stamp: 'JPF 6/2/2021 18:59:50'!
initializeFor: anAccount
	
	account := anAccount.
	netTransferValue := 0! !
!NetTransferValueVisitor methodsFor: 'operacion' stamp: 'JPF 6/2/2021 19:00:31'!
netTransferValue
	
	! !
!NetTransferValueVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:01:40' prior: 50882634!
netTransferValue
	
	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	^ netTransferValue ! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:02:55'!
visitDeposit: aDeposit
! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:03:12'!
visitWithdraw: aWithdraw
! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:03:25'!
visitTransferEntry: aTransferEntry
! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:03:36'!
visitTransferOutput: aTransferOutput
! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:04:09' prior: 50882658!
visitTransferEntry: aTransferEntry

	aTransferEntry affectBalance: netTransferValue! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:04:33' prior: 50882663!
visitTransferOutput: aTransferOutput

	aTransferOutput affectBalance: netTransferValue! !
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 6/2/2021 19:05:32' prior: 50879802!
netTransferValue

	^ (NetTransferValueVisitor for: self) netTransferValue 

	"| net |
	
	net _ 0.

	transactions do: [  :transaction | 	
		(transaction isKindOf: TransferEntry) ifTrue: [ net _ transaction affectBalance: net].
		(transaction isKindOf: TransferOutput) ifTrue: [ net _ transaction affectBalance: net].
		].
	
	^ net"! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:05:51'!
ERROR!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:05:51'!
ERROR!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:05:51'!
ERROR!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:05:51'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:05:58'!
ERROR!
!SummaryVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:07:26'!
visitDeposit: aDeposit
	
	summary add: 'Depósito por ' , aDeposit value asString , '.'! !
!Deposit methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:07:26' prior: 50880769 overrides: 50880764!
accept: aVisitor
	
	aVisitor visitDeposit: self! !

!methodRemoval: SummaryVisitor #visitADeposit: stamp: 'JPF 6/2/2021 19:07:26'!
visitADeposit: aDeposit
	
	summary add: 'Depósito por ' , aDeposit value asString , '.'!
!SummaryVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:07:49'!
visitWithdraw: aWithdraw
	
	summary add: 'Extracción por ' , aWithdraw value asString , '.'! !
!Withdraw methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:07:49' prior: 50880784 overrides: 50880764!
accept: aVisitor
	
	aVisitor visitWithdraw: self! !

!methodRemoval: SummaryVisitor #visitAWithdraw: stamp: 'JPF 6/2/2021 19:07:49'!
visitAWithdraw: aWithdraw
	
	summary add: 'Extracción por ' , aWithdraw value asString , '.'!
!SummaryVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:08:05'!
visitTransferOutput: aTransferOutput
	
	summary add: 'Salida por transferencia de ' , aTransferOutput value asString , '.'! !
!TransferOutput methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:08:05' prior: 50880779 overrides: 50880764!
accept: aVisitor
	
	aVisitor visitTransferOutput: self! !

!methodRemoval: SummaryVisitor #visitATransferOutput: stamp: 'JPF 6/2/2021 19:08:05'!
visitATransferOutput: aTransferOutput
	
	summary add: 'Salida por transferencia de ' , aTransferOutput value asString , '.'!
!SummaryVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:08:14'!
visitTransferEntry: aTransferEntry
	
	summary add: 'Entrada por transferencia de ' , aTransferEntry value asString , '.'! !
!TransferEntry methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:08:14' prior: 50880774 overrides: 50880764!
accept: aVisitor
	
	aVisitor visitTransferEntry: self! !

!methodRemoval: SummaryVisitor #visitATransferEntry: stamp: 'JPF 6/2/2021 19:08:14'!
visitATransferEntry: aTransferEntry
	
	summary add: 'Entrada por transferencia de ' , aTransferEntry value asString , '.'!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:08:21'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:08:21'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:08:21'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:08:21'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:08:21'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:08:25'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:08:25'!
FAILURE!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:08:25'!
FAILURE!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:08:28'!
FAILURE!
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:09:18' prior: 50882668!
visitTransferEntry: aTransferEntry

	netTransferValue _ aTransferEntry affectBalance: netTransferValue! !
!NetTransferValueVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:09:32' prior: 50882675!
visitTransferOutput: aTransferOutput

	netTransferValue _ aTransferOutput affectBalance: netTransferValue! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:09:42'!
PASSED!
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 6/2/2021 19:11:20'!
test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	
	self 
		assert:
		(OrderedCollection
			with: 'Entrada por transferencia de 50.'
			with: 'Depósito por 100.'
			with: 'Extracción por 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 50')
		equals: portfolio summary! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 6/2/2021 19:13:24' prior: 50883030!
test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account3 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account2 register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	account3 transfer: 100 to: account.
	account2 transfer: 50 to: account3.
	
	self 
		assert:
		(OrderedCollection
			with: 'Entrada por transferencia de 50.'
			with: 'Depósito por 100.'
			with: 'Extracción por 50.'
			with: 'Salida por transferencia de 50.'
			with: 'Balance = 50')
		equals: portfolio netTransferValue ! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 6/2/2021 19:13:49' prior: 50883057!
test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account3 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account2 register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	account3 transfer: 100 to: account.
	account2 transfer: 50 to: account3.
	
	self 
		assert: 50 equals: portfolio netTransferValue ! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 6/2/2021 19:14:02' prior: 50883086!
test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account3 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account2 register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	account3 transfer: 100 to: account.
	account2 transfer: 50 to: account3.
	
	self assert: 50 equals: portfolio netTransferValue ! !
!ReportTest methodsFor: 'net transfer value tests' stamp: 'JPF 6/2/2021 19:14:21'!
test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account3 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account2 register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	account3 transfer: 100 to: account.
	account2 transfer: 50 to: account3.
	
	self assert: 50 equals: portfolio netTransferValue ! !

!methodRemoval: ReportTest #test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:14:21'!
test05ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions
	
	| portfolio portfolioChild account account2 account3 |
	
	account _ ReceptiveAccount new.
	account2 _ ReceptiveAccount new.
	account3 _ ReceptiveAccount new.
	
	portfolioChild _ Portfolio with: account2.
	portfolio _ Portfolio with: portfolioChild with: account.
	
	account register: (Deposit for: 100).
	account2 register: (Withdraw for: 50).
	
	account transfer: 50 to: account2.
	account3 transfer: 100 to: account.
	account2 transfer: 50 to: account3.
	
	self assert: 50 equals: portfolio netTransferValue !

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:14:59'!
ERROR!
!Portfolio methodsFor: 'report' stamp: 'JPF 6/2/2021 19:15:18'!
netTransferValue
	self shouldBeImplemented.! !
!Portfolio methodsFor: 'report' stamp: 'JPF 6/2/2021 19:15:40' prior: 50883184!
netTransferValue
	
	^ (NetTransferValueVisitor for: self) netTransferValue! !

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:15:42'!
PASSED!
!Behavior method!
initialize
	(accounts _ [
	(OrderedCollection
		cover: (26 to: 42)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{44 to: 46})
		cover: (14 to: 21)
		declaredAt: (14 to: 21).
	(parents _ [
	(OrderedCollection
		cover: (61 to: 77)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{79 to: 81})
		cover: (50 to: 56)
		declaredAt: (50 to: 56).! !
!Behavior method!
balance
	^ [
	(accounts
		cover: (13 to: 20)
		declaredAt: (13 to: 20))
		sum: [ :anAccount |
			[
			(anAccount
				cover: (42 to: 50)
				declaredAt: (30 to: 38)) balance ] valueCoveringAll:
				{52 to: 58} ]
		ifEmpty: [
			0 coverAll:
				{73 to: 73} ]] valueCoveringAll:
		{22 to: 25. 62 to: 69}.! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
initialize
	[ super initialize ] valueCoveringAll:
		{20 to: 29}.
	(transactions _ [
	(OrderedCollection
		cover: (49 to: 65)
		declaredAt: (49 to: 65)) new ] valueCoveringAll:
		{67 to: 69})
		cover: (33 to: 44)
		declaredAt: (33 to: 44).! !
!Behavior method!
register: aValue on: account
	| transaction |
	(transaction _ [
	(self coverAll:
		{66 to: 69}) for:
		(aValue
			cover: (76 to: 81)
			declaredAt: (11 to: 16)) ] valueCoveringAll:
		{71 to: 74})
		cover: (51 to: 61)
		declaredAt: (34 to: 44).
	[
	(account
		cover: (85 to: 91)
		declaredAt: (22 to: 28)) register:
		(transaction
			cover: (103 to: 113)
			declaredAt: (34 to: 44)) ] valueCoveringAll:
		{93 to: 101}.
	^ transaction
		cover: (122 to: 132)
		declaredAt: (34 to: 44).! !
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
register: aTransaction
	[
	(transactions
		cover: (26 to: 37)
		declaredAt: (26 to: 37)) add:
		(aTransaction
			cover: (44 to: 55)
			declaredAt: (11 to: 22)) ] valueCoveringAll:
		{39 to: 42}.! !
!Behavior method!
with: anAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{32 to: 45}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{50 to: 57} ] value.! !
!Behavior method!
add: accountToAdd
	[
	(self coverAll:
		{21 to: 24}) assertCanAdd:
		(accountToAdd
			cover: (40 to: 51)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{26 to: 38}.
	[
	(accounts
		cover: (58 to: 65)
		declaredAt: (58 to: 65)) add:
		(accountToAdd
			cover: (72 to: 83)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{67 to: 70}.
	[
	(accountToAdd
		cover: (87 to: 98)
		declaredAt: (6 to: 17)) addedTo:
		(self coverAll:
			{109 to: 112}) ] valueCoveringAll:
		{100 to: 107}.! !
!Behavior method!
assertCanAdd: accountToAdd
	[
	([
	(self coverAll:
		{31 to: 34}) anyRootParentIsComposedBy:
		(accountToAdd
			cover: (63 to: 74)
			declaredAt: (15 to: 26)) ] valueCoveringAll:
		{36 to: 61}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) signalCanNotAddAccount ] valueCoveringAll:
			{92 to: 113} ]] valueCoveringAll:
		{77 to: 83}.! !
!Behavior method!
anyRootParentIsComposedBy: accountToAdd
	^ [
	([
	(self coverAll:
		{44 to: 47}) rootParents ] valueCoveringAll:
		{49 to: 59}) anySatisfy: [ :aParent |
		[
		(aParent
			cover: (86 to: 92)
			declaredAt: (76 to: 82)) isComposedBy:
			(accountToAdd
				cover: (108 to: 119)
				declaredAt: (28 to: 39)) ] valueCoveringAll:
			{94 to: 106} ]] valueCoveringAll:
		{61 to: 71}.! !
!Behavior method!
rootParents
	| rootParents |
	(rootParents _ [
	(Set
		cover: (50 to: 52)
		declaredAt: (50 to: 52)) new ] valueCoveringAll:
		{54 to: 56})
		cover: (35 to: 45)
		declaredAt: (18 to: 28).
	[
	(self coverAll:
		{60 to: 63}) addRootParentsTo:
		(rootParents
			cover: (83 to: 93)
			declaredAt: (18 to: 28)) ] valueCoveringAll:
		{65 to: 81}.
	^ rootParents
		cover: (101 to: 111)
		declaredAt: (18 to: 28).! !
!Behavior method!
addRootParentsTo: rootParents
	[
	(parents
		cover: (33 to: 39)
		declaredAt: (33 to: 39))
		ifEmpty: [
			[
			(rootParents
				cover: (55 to: 65)
				declaredAt: (19 to: 29)) add:
				(self coverAll:
					{72 to: 75}) ] valueCoveringAll:
				{67 to: 70} ]
		ifNotEmpty: [
			[
			(parents
				cover: (96 to: 102)
				declaredAt: (33 to: 39)) do: [ :aParent |
				[
				(aParent
					cover: (121 to: 127)
					declaredAt: (111 to: 117)) addRootParentsTo:
					(rootParents
						cover: (147 to: 157)
						declaredAt: (19 to: 29)) ] valueCoveringAll:
					{129 to: 145} ]] valueCoveringAll:
				{104 to: 106} ]] valueCoveringAll:
		{44 to: 51. 82 to: 92}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	([
	(self coverAll:
		{29 to: 32}) =
		(anAccount
			cover: (36 to: 44)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{34 to: 34}) or: [
		[
		(accounts
			cover: (52 to: 59)
			declaredAt: (52 to: 59)) anySatisfy: [ :composedAccount |
			[
			([
			(composedAccount
				cover: (95 to: 109)
				declaredAt: (76 to: 90)) isComposedBy:
				(anAccount
					cover: (125 to: 133)
					declaredAt: (15 to: 23)) ] valueCoveringAll:
				{111 to: 123}) or: [
				[
				(anAccount
					cover: (142 to: 150)
					declaredAt: (15 to: 23)) isComposedBy:
					(composedAccount
						cover: (166 to: 180)
						declaredAt: (76 to: 90)) ] valueCoveringAll:
					{152 to: 164} ]] valueCoveringAll:
				{136 to: 138} ]] valueCoveringAll:
			{61 to: 71} ]] valueCoveringAll:
		{46 to: 48}.! !
!Behavior method!
addedTo: aPortfolio
	^ self.! !
!Behavior method!
balance
	^ [
	(transactions
		cover: (12 to: 23)
		declaredAt: (12 to: 23))
		inject:
			(0 coverAll:
				{36 to: 36})
		into: [ :currentBalance :transaction |
			[
			(transaction
				cover: (79 to: 89)
				declaredAt: (65 to: 75)) affectBalance:
				(currentBalance
					cover: (106 to: 119)
					declaredAt: (49 to: 62)) ] valueCoveringAll:
				{91 to: 104} ]] valueCoveringAll:
		{28 to: 34. 40 to: 44}.! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
with: anAccount with: anotherAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{41 to: 44}) new ] valueCoveringAll:
		{46 to: 48}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{53 to: 66}.
	[ cascadeReceiver add: anotherAccount ] valueCoveringAll:
		{71 to: 89}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{94 to: 101} ] value.! !
!Behavior method!
addedTo: aPortfolio
	[
	(parents
		cover: (25 to: 31)
		declaredAt: (25 to: 31)) add:
		(aPortfolio
			cover: (38 to: 47)
			declaredAt: (10 to: 19)) ] valueCoveringAll:
		{33 to: 36}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	(self coverAll:
		{28 to: 31}) =
		(anAccount
			cover: (35 to: 43)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{33 to: 33}.! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
hasRegistered: aTransaction
	^ [
	(accounts
		cover: (32 to: 39)
		declaredAt: (32 to: 39)) anySatisfy: [ :anAccount |
		[
		(anAccount
			cover: (68 to: 76)
			declaredAt: (56 to: 64)) hasRegistered:
			(aTransaction
				cover: (93 to: 104)
				declaredAt: (16 to: 27)) ] valueCoveringAll:
			{78 to: 91} ]] valueCoveringAll:
		{41 to: 51}.! !

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
hasRegistered: aTransaction
	^ [
	(transactions
		cover: (33 to: 44)
		declaredAt: (33 to: 44)) includes:
		(aTransaction
			cover: (56 to: 67)
			declaredAt: (16 to: 27)) ] valueCoveringAll:
		{46 to: 54}.! !

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
transactions
	| transactions |
	(transactions _ [
	(OrderedCollection
		cover: (53 to: 69)
		declaredAt: (53 to: 69)) new ] valueCoveringAll:
		{71 to: 73})
		cover: (37 to: 48)
		declaredAt: (19 to: 30).
	[
	(accounts
		cover: (77 to: 84)
		declaredAt: (77 to: 84)) do: [ :anAccount |
		[
		(anAccount
			cover: (105 to: 113)
			declaredAt: (93 to: 101)) addTransactionsTo:
			(transactions
				cover: (134 to: 145)
				declaredAt: (19 to: 30)) ] valueCoveringAll:
			{115 to: 132} ]] valueCoveringAll:
		{86 to: 88}.
	^ transactions
		cover: (154 to: 165)
		declaredAt: (19 to: 30).! !

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(aCollectionOfTransactions
		cover: (48 to: 72)
		declaredAt: (20 to: 44)) addAll:
		(transactions
			cover: (82 to: 93)
			declaredAt: (82 to: 93)) ] valueCoveringAll:
		{74 to: 80}.! !

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(accounts
		cover: (48 to: 55)
		declaredAt: (48 to: 55)) do: [ :anAccount |
		[
		(anAccount
			cover: (76 to: 84)
			declaredAt: (64 to: 72)) addTransactionsTo:
			(aCollectionOfTransactions
				cover: (105 to: 129)
				declaredAt: (20 to: 44)) ] valueCoveringAll:
			{86 to: 103} ]] valueCoveringAll:
		{57 to: 59}.! !

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
signalCanNotAddAccount
	[
	(self coverAll:
		{27 to: 30}) error:
		([
		([
		(self coverAll:
			{39 to: 42}) class ] valueCoveringAll:
			{44 to: 48}) canNotAddAccountErrorMessage ] valueCoveringAll:
			{50 to: 77}) ] valueCoveringAll:
		{32 to: 37}.! !
!Behavior method!
canNotAddAccountErrorMessage
	^ 'Can not add repeated account to a portfolio' coverAll:
		{34 to: 78}.! !
!Behavior method!
accountsSize
	^ [
	(accounts
		cover: (18 to: 25)
		declaredAt: (18 to: 25)) size ] valueCoveringAll:
		{27 to: 30}.! !
!Behavior method!
accountsIncludes: anAccount
	^ [
	(accounts
		cover: (32 to: 39)
		declaredAt: (32 to: 39)) includes:
		(anAccount
			cover: (51 to: 59)
			declaredAt: (19 to: 27)) ] valueCoveringAll:
		{41 to: 49}.! !

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
accountsIsEmpty
	^ [
	(accounts
		cover: (21 to: 28)
		declaredAt: (21 to: 28)) isEmpty ] valueCoveringAll:
		{30 to: 36}.! !

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
transactions
	^ [
	(transactions
		cover: (19 to: 30)
		declaredAt: (19 to: 30)) copy ] valueCoveringAll:
		{32 to: 35}.! !

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:16:02'!
PASSED!
!Behavior method!
netTransferValue
	^ [
	([
	(NetTransferValueVisitor
		cover: (23 to: 45)
		declaredAt: (23 to: 45)) for:
		(self coverAll:
			{52 to: 55}) ] valueCoveringAll:
		{47 to: 50}) netTransferValue
	"| net |
	
	net _ 0.

	transactions do: [  :transaction | 	
		(transaction isKindOf: TransferEntry) ifTrue: [ net _ transaction affectBalance: net].
		(transaction isKindOf: TransferOutput) ifTrue: [ net _ transaction affectBalance: net].
		].
	
	^ net" ] valueCoveringAll:
		{58 to: 73}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(netTransferValue _ 0 coverAll:
		{71 to: 72})
		cover: (52 to: 67)
		declaredAt: (52 to: 67).! !
!Behavior method!
netTransferValue
	| transactionIterator |
	(transactionIterator _ [
	(account
		cover: (70 to: 76)
		declaredAt: (70 to: 76)) transactionIterator ] valueCoveringAll:
		{78 to: 96})
		cover: (48 to: 66)
		declaredAt: (23 to: 41).
	[
	[
	[
	(transactionIterator
		cover: (104 to: 122)
		declaredAt: (23 to: 41)) hasNext ] valueCoveringAll:
		{124 to: 130} ] whileTrue: [ | currentTransaction |
		(currentTransaction _ [
		(transactionIterator
			cover: (193 to: 211)
			declaredAt: (23 to: 41)) next ] valueCoveringAll:
			{213 to: 216})
			cover: (172 to: 189)
			declaredAt: (149 to: 166).
		[
		(currentTransaction
			cover: (221 to: 238)
			declaredAt: (149 to: 166)) accept:
			(self coverAll:
				{248 to: 251}) ] valueCoveringAll:
			{240 to: 246} ]] valueCoveringAll:
		{134 to: 143}.
	^ netTransferValue
		cover: (263 to: 278)
		declaredAt: (263 to: 278).! !
!Behavior method!
transactionIterator
	^ [
	(TransactionIterator
		cover: (26 to: 44)
		declaredAt: (26 to: 44)) with:
		([
		(self coverAll:
			{52 to: 55}) transactions ] valueCoveringAll:
			{57 to: 68}) ] valueCoveringAll:
		{46 to: 50}.! !
!Behavior method!
with: transactions
	^ [
	([
	(self coverAll:
		{25 to: 28}) new ] valueCoveringAll:
		{30 to: 32}) initializeWith:
		(transactions
			cover: (50 to: 61)
			declaredAt: (7 to: 18)) ] valueCoveringAll:
		{34 to: 48}.! !
!Behavior method!
initializeWith: transactionCollection
	(transactions _ transactionCollection
		cover: (57 to: 77)
		declaredAt: (17 to: 37))
		cover: (42 to: 53)
		declaredAt: (42 to: 53).
	(index _ 1 coverAll:
		{88 to: 89})
		cover: (81 to: 85)
		declaredAt: (81 to: 85).! !
!Behavior method!
hasNext
	^ [
	(index
		cover: (14 to: 18)
		declaredAt: (14 to: 18)) <=
		([
		(transactions
			cover: (23 to: 34)
			declaredAt: (23 to: 34)) size ] valueCoveringAll:
			{36 to: 39}) ] valueCoveringAll:
		{20 to: 21}.! !
!Behavior method!
next
	| currentTransaction |
	[
	(self coverAll:
		{35 to: 38}) assertHasNext ] valueCoveringAll:
		{40 to: 52}.
	(currentTransaction _ [
	(transactions
		cover: (79 to: 90)
		declaredAt: (79 to: 90)) at:
		(index
			cover: (96 to: 100)
			declaredAt: (96 to: 100)) ] valueCoveringAll:
		{92 to: 94})
		cover: (58 to: 75)
		declaredAt: (11 to: 28).
	(index _ [
	(index
		cover: (104 to: 108)
		declaredAt: (96 to: 100)) +
		(1 coverAll:
			{120 to: 120}) ] valueCoveringAll:
		{118 to: 118})
		cover: (112 to: 116)
		declaredAt: (96 to: 100).
	^ currentTransaction
		cover: (128 to: 145)
		declaredAt: (11 to: 28).! !
!Behavior method!
assertHasNext
	^ [
	([
	(self coverAll:
		{20 to: 23}) hasNext ] valueCoveringAll:
		{25 to: 31}) ifFalse: [
		[
		(self coverAll:
			{45 to: 48}) error:
			([
			([
			(self coverAll:
				{57 to: 60}) class ] valueCoveringAll:
				{62 to: 66}) notNextTransationErrorDescription ] valueCoveringAll:
				{68 to: 100}) ] valueCoveringAll:
			{50 to: 55} ]] valueCoveringAll:
		{34 to: 41}.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitDeposit:
		(self coverAll:
			{44 to: 47}) ] valueCoveringAll:
		{30 to: 42}.! !
!Behavior method!
visitDeposit: aDeposit
	^ self.! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
summary
	^ [
	([
	(SummaryVisitor
		cover: (14 to: 27)
		declaredAt: (14 to: 27)) for:
		(self coverAll:
			{34 to: 37}) ] valueCoveringAll:
		{29 to: 32}) summary ] valueCoveringAll:
		{40 to: 46}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(summary _ [
	(OrderedCollection
		cover: (63 to: 79)
		declaredAt: (63 to: 79)) new ] valueCoveringAll:
		{81 to: 83})
		cover: (52 to: 58)
		declaredAt: (52 to: 58).! !
!Behavior method!
summary
	| transactionIterator |
	(transactionIterator _ [
	(account
		cover: (60 to: 66)
		declaredAt: (60 to: 66)) transactionIterator ] valueCoveringAll:
		{68 to: 86})
		cover: (38 to: 56)
		declaredAt: (13 to: 31).
	[
	[
	[
	(transactionIterator
		cover: (94 to: 112)
		declaredAt: (13 to: 31)) hasNext ] valueCoveringAll:
		{114 to: 120} ] whileTrue: [ | currentTransaction |
		(currentTransaction _ [
		(transactionIterator
			cover: (183 to: 201)
			declaredAt: (13 to: 31)) next ] valueCoveringAll:
			{203 to: 206})
			cover: (162 to: 179)
			declaredAt: (139 to: 156).
		[
		(currentTransaction
			cover: (211 to: 228)
			declaredAt: (139 to: 156)) accept:
			(self coverAll:
				{238 to: 241}) ] valueCoveringAll:
			{230 to: 236} ]] valueCoveringAll:
		{124 to: 133}.
	[
	(summary
		cover: (251 to: 257)
		declaredAt: (251 to: 257)) add:
		([
		('Balance = ' coverAll:
			{264 to: 275}) ,
			([
			([
			(account
				cover: (278 to: 284)
				declaredAt: (60 to: 66)) balance ] valueCoveringAll:
				{286 to: 292}) asString ] valueCoveringAll:
				{294 to: 301}) ] valueCoveringAll:
			{276 to: 276}) ] valueCoveringAll:
		{259 to: 262}.
	^ summary
		cover: (309 to: 315)
		declaredAt: (251 to: 257).! !

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
transfer: aValue to: targetReceptiveAccount
	| transfer |
	[
	(self coverAll:
		{65 to: 68}) assertSourceAndTargetAccountAreNotTheSameAccount:
		(targetReceptiveAccount
			cover: (120 to: 141)
			declaredAt: (22 to: 43)) ] valueCoveringAll:
		{70 to: 118}.
	[
	(self coverAll:
		{145 to: 148}) assertTheAmountTransferedIsValid:
		(aValue
			cover: (184 to: 189)
			declaredAt: (11 to: 16)) ] valueCoveringAll:
		{150 to: 182}.
	(transfer _ [
	(Transfer
		cover: (206 to: 213)
		declaredAt: (206 to: 213))
		for:
			(aValue
				cover: (220 to: 225)
				declaredAt: (11 to: 16))
		from:
			(self coverAll:
				{233 to: 236})
		to:
			(targetReceptiveAccount
				cover: (242 to: 263)
				declaredAt: (22 to: 43)) ] valueCoveringAll:
		{215 to: 218. 227 to: 231. 238 to: 240})
		cover: (195 to: 202)
		declaredAt: (51 to: 58).
	^ transfer
		cover: (271 to: 278)
		declaredAt: (51 to: 58).! !
!Behavior method!
assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount
	^ [
	([
	(targetReceptiveAccount
		cover: (79 to: 100)
		declaredAt: (51 to: 72)) =
		(self coverAll:
			{104 to: 107}) ] valueCoveringAll:
		{102 to: 102}) ifTrue: [
		[
		(self coverAll:
			{120 to: 123}) error:
			([
			([
			(self coverAll:
				{132 to: 135}) class ] valueCoveringAll:
				{137 to: 141}) transferToSourceAccountErrorDescription ] valueCoveringAll:
				{143 to: 181}) ] valueCoveringAll:
			{125 to: 130} ]] valueCoveringAll:
		{110 to: 116}.! !
!Behavior method!
assertTheAmountTransferedIsValid: aValue
	^ [
	([
	(aValue
		cover: (47 to: 52)
		declaredAt: (35 to: 40)) <=
		(0 coverAll:
			{57 to: 57}) ] valueCoveringAll:
		{54 to: 55}) ifTrue: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) invalidAmountErrorDescription ] valueCoveringAll:
				{93 to: 121}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{60 to: 66}.! !
!Behavior method!
for: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	^ [
	([
	(self coverAll:
		{76 to: 79}) new ] valueCoveringAll:
		{81 to: 83})
		initializeFor:
			(aValue
				cover: (100 to: 105)
				declaredAt: (6 to: 11))
		from:
			(aSourceReceptiveAccount
				cover: (113 to: 135)
				declaredAt: (19 to: 41))
		to:
			(aTargetReceptiveAccount
				cover: (141 to: 163)
				declaredAt: (47 to: 69)) ] valueCoveringAll:
		{85 to: 98. 107 to: 111. 137 to: 139}.! !
!Behavior method!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	(value _ aValue
		cover: (92 to: 97)
		declaredAt: (16 to: 21))
		cover: (83 to: 87)
		declaredAt: (83 to: 87).
	(output _ [
	(TransferOutput
		cover: (111 to: 124)
		declaredAt: (111 to: 124)) for:
		(self coverAll:
			{131 to: 134}) ] valueCoveringAll:
		{126 to: 129})
		cover: (101 to: 106)
		declaredAt: (101 to: 106).
	(entry _ [
	(TransferEntry
		cover: (147 to: 159)
		declaredAt: (147 to: 159)) for:
		(self coverAll:
			{166 to: 169}) ] valueCoveringAll:
		{161 to: 164})
		cover: (138 to: 142)
		declaredAt: (138 to: 142).
	[
	(aSourceReceptiveAccount
		cover: (175 to: 197)
		declaredAt: (29 to: 51)) register:
		(output
			cover: (209 to: 214)
			declaredAt: (101 to: 106)) ] valueCoveringAll:
		{199 to: 207}.
	[
	(aTargetReceptiveAccount
		cover: (218 to: 240)
		declaredAt: (57 to: 79)) register:
		(entry
			cover: (252 to: 256)
			declaredAt: (138 to: 142)) ] valueCoveringAll:
		{242 to: 250}.! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitWithdraw:
		(self coverAll:
			{45 to: 48}) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
visitWithdraw: aWithdraw
	^ self.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferEntry:
		(self coverAll:
			{50 to: 53}) ] valueCoveringAll:
		{30 to: 48}.! !
!Behavior method!
visitTransferEntry: aTransferEntry
	(netTransferValue _ [
	(aTransferEntry
		cover: (57 to: 70)
		declaredAt: (21 to: 34)) affectBalance:
		(netTransferValue
			cover: (38 to: 53)
			declaredAt: (38 to: 53)) ] valueCoveringAll:
		{72 to: 85})
		cover: (87 to: 102)
		declaredAt: (38 to: 53).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !
!Behavior method!
value
	^ [
	(transfer
		cover: (12 to: 19)
		declaredAt: (12 to: 19)) value ] valueCoveringAll:
		{21 to: 25}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
visitDeposit: aDeposit
	[
	(summary
		cover: (27 to: 33)
		declaredAt: (27 to: 33)) add:
		([
		([
		('Depósito por ' coverAll:
			{40 to: 54}) ,
			([
			([
			(aDeposit
				cover: (58 to: 65)
				declaredAt: (15 to: 22)) value ] valueCoveringAll:
				{67 to: 71}) asString ] valueCoveringAll:
				{73 to: 80}) ] valueCoveringAll:
			{56 to: 56}) ,
			('.' coverAll:
				{84 to: 86}) ] valueCoveringAll:
			{82 to: 82}) ] valueCoveringAll:
		{35 to: 38}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferOutput:
		(self coverAll:
			{51 to: 54}) ] valueCoveringAll:
		{30 to: 49}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	(netTransferValue _ [
	(aTransferOutput
		cover: (59 to: 73)
		declaredAt: (22 to: 36)) affectBalance:
		(netTransferValue
			cover: (40 to: 55)
			declaredAt: (40 to: 55)) ] valueCoveringAll:
		{75 to: 88})
		cover: (90 to: 105)
		declaredAt: (40 to: 55).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !
!Behavior method!
value
	^ [
	(transfer
		cover: (12 to: 19)
		declaredAt: (12 to: 19)) value ] valueCoveringAll:
		{21 to: 25}.! !

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
visitWithdraw: aWithdraw
	[
	(summary
		cover: (29 to: 35)
		declaredAt: (29 to: 35)) add:
		([
		([
		('Extracción por ' coverAll:
			{42 to: 58}) ,
			([
			([
			(aWithdraw
				cover: (62 to: 70)
				declaredAt: (16 to: 24)) value ] valueCoveringAll:
				{72 to: 76}) asString ] valueCoveringAll:
				{78 to: 85}) ] valueCoveringAll:
			{60 to: 60}) ,
			('.' coverAll:
				{89 to: 91}) ] valueCoveringAll:
			{87 to: 87}) ] valueCoveringAll:
		{37 to: 40}.! !

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
visitTransferEntry: aTransferEntry
	[
	(summary
		cover: (39 to: 45)
		declaredAt: (39 to: 45)) add:
		([
		([
		('Entrada por transferencia de ' coverAll:
			{52 to: 82}) ,
			([
			([
			(aTransferEntry
				cover: (86 to: 99)
				declaredAt: (21 to: 34)) value ] valueCoveringAll:
				{101 to: 105}) asString ] valueCoveringAll:
				{107 to: 114}) ] valueCoveringAll:
			{84 to: 84}) ,
			('.' coverAll:
				{118 to: 120}) ] valueCoveringAll:
			{116 to: 116}) ] valueCoveringAll:
		{47 to: 50}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	[
	(summary
		cover: (41 to: 47)
		declaredAt: (41 to: 47)) add:
		([
		([
		('Salida por transferencia de ' coverAll:
			{54 to: 83}) ,
			([
			([
			(aTransferOutput
				cover: (87 to: 101)
				declaredAt: (22 to: 36)) value ] valueCoveringAll:
				{103 to: 107}) asString ] valueCoveringAll:
				{109 to: 116}) ] valueCoveringAll:
			{85 to: 85}) ,
			('.' coverAll:
				{120 to: 122}) ] valueCoveringAll:
			{118 to: 118}) ] valueCoveringAll:
		{49 to: 52}.! !

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
netTransferValue
	^ [
	([
	(NetTransferValueVisitor
		cover: (24 to: 46)
		declaredAt: (24 to: 46)) for:
		(self coverAll:
			{53 to: 56}) ] valueCoveringAll:
		{48 to: 51}) netTransferValue ] valueCoveringAll:
		{59 to: 74}.! !

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
notNextTransationErrorDescription
	^ 'Cannot ask for next when iterator has not next' coverAll:
		{40 to: 87}.! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
output
	^ output
		cover: (13 to: 18)
		declaredAt: (13 to: 18).! !
!Behavior method!
entry
	^ entry
		cover: (12 to: 16)
		declaredAt: (12 to: 16).! !

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
transfer
	^ transfer
		cover: (14 to: 21)
		declaredAt: (14 to: 21).! !
!Behavior method!
transfer
	^ transfer
		cover: (13 to: 20)
		declaredAt: (13 to: 20).! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
transferToSourceAccountErrorDescription
	^ 'Cannot transfer to the source account' coverAll:
		{46 to: 84}.! !

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
invalidAmountErrorDescription
	^ 'Cannot transfer a negative amount' coverAll:
		{35 to: 69}.! !

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:16:03'!
PASSED!
!Behavior method!
initialize
	[ super initialize ] valueCoveringAll:
		{20 to: 29}.
	(transactions _ [
	(OrderedCollection
		cover: (49 to: 65)
		declaredAt: (49 to: 65)) new ] valueCoveringAll:
		{67 to: 69})
		cover: (33 to: 44)
		declaredAt: (33 to: 44).! !
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
register: aTransaction
	[
	(transactions
		cover: (26 to: 37)
		declaredAt: (26 to: 37)) add:
		(aTransaction
			cover: (44 to: 55)
			declaredAt: (11 to: 22)) ] valueCoveringAll:
		{39 to: 42}.! !
!Behavior method!
netTransferValue
	^ [
	([
	(NetTransferValueVisitor
		cover: (23 to: 45)
		declaredAt: (23 to: 45)) for:
		(self coverAll:
			{52 to: 55}) ] valueCoveringAll:
		{47 to: 50}) netTransferValue
	"| net |
	
	net _ 0.

	transactions do: [  :transaction | 	
		(transaction isKindOf: TransferEntry) ifTrue: [ net _ transaction affectBalance: net].
		(transaction isKindOf: TransferOutput) ifTrue: [ net _ transaction affectBalance: net].
		].
	
	^ net" ] valueCoveringAll:
		{58 to: 73}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(netTransferValue _ 0 coverAll:
		{71 to: 72})
		cover: (52 to: 67)
		declaredAt: (52 to: 67).! !
!Behavior method!
netTransferValue
	| transactionIterator |
	(transactionIterator _ [
	(account
		cover: (70 to: 76)
		declaredAt: (70 to: 76)) transactionIterator ] valueCoveringAll:
		{78 to: 96})
		cover: (48 to: 66)
		declaredAt: (23 to: 41).
	[
	[
	[
	(transactionIterator
		cover: (104 to: 122)
		declaredAt: (23 to: 41)) hasNext ] valueCoveringAll:
		{124 to: 130} ] whileTrue: [ | currentTransaction |
		(currentTransaction _ [
		(transactionIterator
			cover: (193 to: 211)
			declaredAt: (23 to: 41)) next ] valueCoveringAll:
			{213 to: 216})
			cover: (172 to: 189)
			declaredAt: (149 to: 166).
		[
		(currentTransaction
			cover: (221 to: 238)
			declaredAt: (149 to: 166)) accept:
			(self coverAll:
				{248 to: 251}) ] valueCoveringAll:
			{240 to: 246} ]] valueCoveringAll:
		{134 to: 143}.
	^ netTransferValue
		cover: (263 to: 278)
		declaredAt: (263 to: 278).! !
!Behavior method!
transactionIterator
	^ [
	(TransactionIterator
		cover: (26 to: 44)
		declaredAt: (26 to: 44)) with:
		([
		(self coverAll:
			{52 to: 55}) transactions ] valueCoveringAll:
			{57 to: 68}) ] valueCoveringAll:
		{46 to: 50}.! !
!Behavior method!
transactions
	^ [
	(transactions
		cover: (19 to: 30)
		declaredAt: (19 to: 30)) copy ] valueCoveringAll:
		{32 to: 35}.! !
!Behavior method!
with: transactions
	^ [
	([
	(self coverAll:
		{25 to: 28}) new ] valueCoveringAll:
		{30 to: 32}) initializeWith:
		(transactions
			cover: (50 to: 61)
			declaredAt: (7 to: 18)) ] valueCoveringAll:
		{34 to: 48}.! !
!Behavior method!
initializeWith: transactionCollection
	(transactions _ transactionCollection
		cover: (57 to: 77)
		declaredAt: (17 to: 37))
		cover: (42 to: 53)
		declaredAt: (42 to: 53).
	(index _ 1 coverAll:
		{88 to: 89})
		cover: (81 to: 85)
		declaredAt: (81 to: 85).! !
!Behavior method!
hasNext
	^ [
	(index
		cover: (14 to: 18)
		declaredAt: (14 to: 18)) <=
		([
		(transactions
			cover: (23 to: 34)
			declaredAt: (23 to: 34)) size ] valueCoveringAll:
			{36 to: 39}) ] valueCoveringAll:
		{20 to: 21}.! !
!Behavior method!
next
	| currentTransaction |
	[
	(self coverAll:
		{35 to: 38}) assertHasNext ] valueCoveringAll:
		{40 to: 52}.
	(currentTransaction _ [
	(transactions
		cover: (79 to: 90)
		declaredAt: (79 to: 90)) at:
		(index
			cover: (96 to: 100)
			declaredAt: (96 to: 100)) ] valueCoveringAll:
		{92 to: 94})
		cover: (58 to: 75)
		declaredAt: (11 to: 28).
	(index _ [
	(index
		cover: (104 to: 108)
		declaredAt: (96 to: 100)) +
		(1 coverAll:
			{120 to: 120}) ] valueCoveringAll:
		{118 to: 118})
		cover: (112 to: 116)
		declaredAt: (96 to: 100).
	^ currentTransaction
		cover: (128 to: 145)
		declaredAt: (11 to: 28).! !
!Behavior method!
assertHasNext
	^ [
	([
	(self coverAll:
		{20 to: 23}) hasNext ] valueCoveringAll:
		{25 to: 31}) ifFalse: [
		[
		(self coverAll:
			{45 to: 48}) error:
			([
			([
			(self coverAll:
				{57 to: 60}) class ] valueCoveringAll:
				{62 to: 66}) notNextTransationErrorDescription ] valueCoveringAll:
				{68 to: 100}) ] valueCoveringAll:
			{50 to: 55} ]] valueCoveringAll:
		{34 to: 41}.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitDeposit:
		(self coverAll:
			{44 to: 47}) ] valueCoveringAll:
		{30 to: 42}.! !
!Behavior method!
visitDeposit: aDeposit
	^ self.! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
summary
	^ [
	([
	(SummaryVisitor
		cover: (14 to: 27)
		declaredAt: (14 to: 27)) for:
		(self coverAll:
			{34 to: 37}) ] valueCoveringAll:
		{29 to: 32}) summary ] valueCoveringAll:
		{40 to: 46}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(summary _ [
	(OrderedCollection
		cover: (63 to: 79)
		declaredAt: (63 to: 79)) new ] valueCoveringAll:
		{81 to: 83})
		cover: (52 to: 58)
		declaredAt: (52 to: 58).! !
!Behavior method!
summary
	| transactionIterator |
	(transactionIterator _ [
	(account
		cover: (60 to: 66)
		declaredAt: (60 to: 66)) transactionIterator ] valueCoveringAll:
		{68 to: 86})
		cover: (38 to: 56)
		declaredAt: (13 to: 31).
	[
	[
	[
	(transactionIterator
		cover: (94 to: 112)
		declaredAt: (13 to: 31)) hasNext ] valueCoveringAll:
		{114 to: 120} ] whileTrue: [ | currentTransaction |
		(currentTransaction _ [
		(transactionIterator
			cover: (183 to: 201)
			declaredAt: (13 to: 31)) next ] valueCoveringAll:
			{203 to: 206})
			cover: (162 to: 179)
			declaredAt: (139 to: 156).
		[
		(currentTransaction
			cover: (211 to: 228)
			declaredAt: (139 to: 156)) accept:
			(self coverAll:
				{238 to: 241}) ] valueCoveringAll:
			{230 to: 236} ]] valueCoveringAll:
		{124 to: 133}.
	[
	(summary
		cover: (251 to: 257)
		declaredAt: (251 to: 257)) add:
		([
		('Balance = ' coverAll:
			{264 to: 275}) ,
			([
			([
			(account
				cover: (278 to: 284)
				declaredAt: (60 to: 66)) balance ] valueCoveringAll:
				{286 to: 292}) asString ] valueCoveringAll:
				{294 to: 301}) ] valueCoveringAll:
			{276 to: 276}) ] valueCoveringAll:
		{259 to: 262}.
	^ summary
		cover: (309 to: 315)
		declaredAt: (251 to: 257).! !
!Behavior method!
balance
	^ [
	(transactions
		cover: (12 to: 23)
		declaredAt: (12 to: 23))
		inject:
			(0 coverAll:
				{36 to: 36})
		into: [ :currentBalance :transaction |
			[
			(transaction
				cover: (79 to: 89)
				declaredAt: (65 to: 75)) affectBalance:
				(currentBalance
					cover: (106 to: 119)
					declaredAt: (49 to: 62)) ] valueCoveringAll:
				{91 to: 104} ]] valueCoveringAll:
		{28 to: 34. 40 to: 44}.! !

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
transfer: aValue to: targetReceptiveAccount
	| transfer |
	[
	(self coverAll:
		{65 to: 68}) assertSourceAndTargetAccountAreNotTheSameAccount:
		(targetReceptiveAccount
			cover: (120 to: 141)
			declaredAt: (22 to: 43)) ] valueCoveringAll:
		{70 to: 118}.
	[
	(self coverAll:
		{145 to: 148}) assertTheAmountTransferedIsValid:
		(aValue
			cover: (184 to: 189)
			declaredAt: (11 to: 16)) ] valueCoveringAll:
		{150 to: 182}.
	(transfer _ [
	(Transfer
		cover: (206 to: 213)
		declaredAt: (206 to: 213))
		for:
			(aValue
				cover: (220 to: 225)
				declaredAt: (11 to: 16))
		from:
			(self coverAll:
				{233 to: 236})
		to:
			(targetReceptiveAccount
				cover: (242 to: 263)
				declaredAt: (22 to: 43)) ] valueCoveringAll:
		{215 to: 218. 227 to: 231. 238 to: 240})
		cover: (195 to: 202)
		declaredAt: (51 to: 58).
	^ transfer
		cover: (271 to: 278)
		declaredAt: (51 to: 58).! !
!Behavior method!
assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount
	^ [
	([
	(targetReceptiveAccount
		cover: (79 to: 100)
		declaredAt: (51 to: 72)) =
		(self coverAll:
			{104 to: 107}) ] valueCoveringAll:
		{102 to: 102}) ifTrue: [
		[
		(self coverAll:
			{120 to: 123}) error:
			([
			([
			(self coverAll:
				{132 to: 135}) class ] valueCoveringAll:
				{137 to: 141}) transferToSourceAccountErrorDescription ] valueCoveringAll:
				{143 to: 181}) ] valueCoveringAll:
			{125 to: 130} ]] valueCoveringAll:
		{110 to: 116}.! !
!Behavior method!
assertTheAmountTransferedIsValid: aValue
	^ [
	([
	(aValue
		cover: (47 to: 52)
		declaredAt: (35 to: 40)) <=
		(0 coverAll:
			{57 to: 57}) ] valueCoveringAll:
		{54 to: 55}) ifTrue: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) invalidAmountErrorDescription ] valueCoveringAll:
				{93 to: 121}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{60 to: 66}.! !
!Behavior method!
for: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	^ [
	([
	(self coverAll:
		{76 to: 79}) new ] valueCoveringAll:
		{81 to: 83})
		initializeFor:
			(aValue
				cover: (100 to: 105)
				declaredAt: (6 to: 11))
		from:
			(aSourceReceptiveAccount
				cover: (113 to: 135)
				declaredAt: (19 to: 41))
		to:
			(aTargetReceptiveAccount
				cover: (141 to: 163)
				declaredAt: (47 to: 69)) ] valueCoveringAll:
		{85 to: 98. 107 to: 111. 137 to: 139}.! !
!Behavior method!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	(value _ aValue
		cover: (92 to: 97)
		declaredAt: (16 to: 21))
		cover: (83 to: 87)
		declaredAt: (83 to: 87).
	(output _ [
	(TransferOutput
		cover: (111 to: 124)
		declaredAt: (111 to: 124)) for:
		(self coverAll:
			{131 to: 134}) ] valueCoveringAll:
		{126 to: 129})
		cover: (101 to: 106)
		declaredAt: (101 to: 106).
	(entry _ [
	(TransferEntry
		cover: (147 to: 159)
		declaredAt: (147 to: 159)) for:
		(self coverAll:
			{166 to: 169}) ] valueCoveringAll:
		{161 to: 164})
		cover: (138 to: 142)
		declaredAt: (138 to: 142).
	[
	(aSourceReceptiveAccount
		cover: (175 to: 197)
		declaredAt: (29 to: 51)) register:
		(output
			cover: (209 to: 214)
			declaredAt: (101 to: 106)) ] valueCoveringAll:
		{199 to: 207}.
	[
	(aTargetReceptiveAccount
		cover: (218 to: 240)
		declaredAt: (57 to: 79)) register:
		(entry
			cover: (252 to: 256)
			declaredAt: (138 to: 142)) ] valueCoveringAll:
		{242 to: 250}.! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitWithdraw:
		(self coverAll:
			{45 to: 48}) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
visitWithdraw: aWithdraw
	^ self.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferEntry:
		(self coverAll:
			{50 to: 53}) ] valueCoveringAll:
		{30 to: 48}.! !
!Behavior method!
visitTransferEntry: aTransferEntry
	(netTransferValue _ [
	(aTransferEntry
		cover: (57 to: 70)
		declaredAt: (21 to: 34)) affectBalance:
		(netTransferValue
			cover: (38 to: 53)
			declaredAt: (38 to: 53)) ] valueCoveringAll:
		{72 to: 85})
		cover: (87 to: 102)
		declaredAt: (38 to: 53).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !
!Behavior method!
value
	^ [
	(transfer
		cover: (12 to: 19)
		declaredAt: (12 to: 19)) value ] valueCoveringAll:
		{21 to: 25}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
visitDeposit: aDeposit
	[
	(summary
		cover: (27 to: 33)
		declaredAt: (27 to: 33)) add:
		([
		([
		('Depósito por ' coverAll:
			{40 to: 54}) ,
			([
			([
			(aDeposit
				cover: (58 to: 65)
				declaredAt: (15 to: 22)) value ] valueCoveringAll:
				{67 to: 71}) asString ] valueCoveringAll:
				{73 to: 80}) ] valueCoveringAll:
			{56 to: 56}) ,
			('.' coverAll:
				{84 to: 86}) ] valueCoveringAll:
			{82 to: 82}) ] valueCoveringAll:
		{35 to: 38}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferOutput:
		(self coverAll:
			{51 to: 54}) ] valueCoveringAll:
		{30 to: 49}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	(netTransferValue _ [
	(aTransferOutput
		cover: (59 to: 73)
		declaredAt: (22 to: 36)) affectBalance:
		(netTransferValue
			cover: (40 to: 55)
			declaredAt: (40 to: 55)) ] valueCoveringAll:
		{75 to: 88})
		cover: (90 to: 105)
		declaredAt: (40 to: 55).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !
!Behavior method!
value
	^ [
	(transfer
		cover: (12 to: 19)
		declaredAt: (12 to: 19)) value ] valueCoveringAll:
		{21 to: 25}.! !

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
visitWithdraw: aWithdraw
	[
	(summary
		cover: (29 to: 35)
		declaredAt: (29 to: 35)) add:
		([
		([
		('Extracción por ' coverAll:
			{42 to: 58}) ,
			([
			([
			(aWithdraw
				cover: (62 to: 70)
				declaredAt: (16 to: 24)) value ] valueCoveringAll:
				{72 to: 76}) asString ] valueCoveringAll:
				{78 to: 85}) ] valueCoveringAll:
			{60 to: 60}) ,
			('.' coverAll:
				{89 to: 91}) ] valueCoveringAll:
			{87 to: 87}) ] valueCoveringAll:
		{37 to: 40}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
visitTransferEntry: aTransferEntry
	[
	(summary
		cover: (39 to: 45)
		declaredAt: (39 to: 45)) add:
		([
		([
		('Entrada por transferencia de ' coverAll:
			{52 to: 82}) ,
			([
			([
			(aTransferEntry
				cover: (86 to: 99)
				declaredAt: (21 to: 34)) value ] valueCoveringAll:
				{101 to: 105}) asString ] valueCoveringAll:
				{107 to: 114}) ] valueCoveringAll:
			{84 to: 84}) ,
			('.' coverAll:
				{118 to: 120}) ] valueCoveringAll:
			{116 to: 116}) ] valueCoveringAll:
		{47 to: 50}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	[
	(summary
		cover: (41 to: 47)
		declaredAt: (41 to: 47)) add:
		([
		([
		('Salida por transferencia de ' coverAll:
			{54 to: 83}) ,
			([
			([
			(aTransferOutput
				cover: (87 to: 101)
				declaredAt: (22 to: 36)) value ] valueCoveringAll:
				{103 to: 107}) asString ] valueCoveringAll:
				{109 to: 116}) ] valueCoveringAll:
			{85 to: 85}) ,
			('.' coverAll:
				{120 to: 122}) ] valueCoveringAll:
			{118 to: 118}) ] valueCoveringAll:
		{49 to: 52}.! !

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
with: anAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{32 to: 45}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{50 to: 57} ] value.! !
!Behavior method!
initialize
	(accounts _ [
	(OrderedCollection
		cover: (26 to: 42)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{44 to: 46})
		cover: (14 to: 21)
		declaredAt: (14 to: 21).
	(parents _ [
	(OrderedCollection
		cover: (61 to: 77)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{79 to: 81})
		cover: (50 to: 56)
		declaredAt: (50 to: 56).! !
!Behavior method!
add: accountToAdd
	[
	(self coverAll:
		{21 to: 24}) assertCanAdd:
		(accountToAdd
			cover: (40 to: 51)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{26 to: 38}.
	[
	(accounts
		cover: (58 to: 65)
		declaredAt: (58 to: 65)) add:
		(accountToAdd
			cover: (72 to: 83)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{67 to: 70}.
	[
	(accountToAdd
		cover: (87 to: 98)
		declaredAt: (6 to: 17)) addedTo:
		(self coverAll:
			{109 to: 112}) ] valueCoveringAll:
		{100 to: 107}.! !
!Behavior method!
assertCanAdd: accountToAdd
	[
	([
	(self coverAll:
		{31 to: 34}) anyRootParentIsComposedBy:
		(accountToAdd
			cover: (63 to: 74)
			declaredAt: (15 to: 26)) ] valueCoveringAll:
		{36 to: 61}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) signalCanNotAddAccount ] valueCoveringAll:
			{92 to: 113} ]] valueCoveringAll:
		{77 to: 83}.! !
!Behavior method!
anyRootParentIsComposedBy: accountToAdd
	^ [
	([
	(self coverAll:
		{44 to: 47}) rootParents ] valueCoveringAll:
		{49 to: 59}) anySatisfy: [ :aParent |
		[
		(aParent
			cover: (86 to: 92)
			declaredAt: (76 to: 82)) isComposedBy:
			(accountToAdd
				cover: (108 to: 119)
				declaredAt: (28 to: 39)) ] valueCoveringAll:
			{94 to: 106} ]] valueCoveringAll:
		{61 to: 71}.! !
!Behavior method!
rootParents
	| rootParents |
	(rootParents _ [
	(Set
		cover: (50 to: 52)
		declaredAt: (50 to: 52)) new ] valueCoveringAll:
		{54 to: 56})
		cover: (35 to: 45)
		declaredAt: (18 to: 28).
	[
	(self coverAll:
		{60 to: 63}) addRootParentsTo:
		(rootParents
			cover: (83 to: 93)
			declaredAt: (18 to: 28)) ] valueCoveringAll:
		{65 to: 81}.
	^ rootParents
		cover: (101 to: 111)
		declaredAt: (18 to: 28).! !
!Behavior method!
addRootParentsTo: rootParents
	[
	(parents
		cover: (33 to: 39)
		declaredAt: (33 to: 39))
		ifEmpty: [
			[
			(rootParents
				cover: (55 to: 65)
				declaredAt: (19 to: 29)) add:
				(self coverAll:
					{72 to: 75}) ] valueCoveringAll:
				{67 to: 70} ]
		ifNotEmpty: [
			[
			(parents
				cover: (96 to: 102)
				declaredAt: (33 to: 39)) do: [ :aParent |
				[
				(aParent
					cover: (121 to: 127)
					declaredAt: (111 to: 117)) addRootParentsTo:
					(rootParents
						cover: (147 to: 157)
						declaredAt: (19 to: 29)) ] valueCoveringAll:
					{129 to: 145} ]] valueCoveringAll:
				{104 to: 106} ]] valueCoveringAll:
		{44 to: 51. 82 to: 92}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	([
	(self coverAll:
		{29 to: 32}) =
		(anAccount
			cover: (36 to: 44)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{34 to: 34}) or: [
		[
		(accounts
			cover: (52 to: 59)
			declaredAt: (52 to: 59)) anySatisfy: [ :composedAccount |
			[
			([
			(composedAccount
				cover: (95 to: 109)
				declaredAt: (76 to: 90)) isComposedBy:
				(anAccount
					cover: (125 to: 133)
					declaredAt: (15 to: 23)) ] valueCoveringAll:
				{111 to: 123}) or: [
				[
				(anAccount
					cover: (142 to: 150)
					declaredAt: (15 to: 23)) isComposedBy:
					(composedAccount
						cover: (166 to: 180)
						declaredAt: (76 to: 90)) ] valueCoveringAll:
					{152 to: 164} ]] valueCoveringAll:
				{136 to: 138} ]] valueCoveringAll:
			{61 to: 71} ]] valueCoveringAll:
		{46 to: 48}.! !
!Behavior method!
addedTo: aPortfolio
	^ self.! !
!Behavior method!
with: anAccount with: anotherAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{41 to: 44}) new ] valueCoveringAll:
		{46 to: 48}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{53 to: 66}.
	[ cascadeReceiver add: anotherAccount ] valueCoveringAll:
		{71 to: 89}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{94 to: 101} ] value.! !
!Behavior method!
addedTo: aPortfolio
	[
	(parents
		cover: (25 to: 31)
		declaredAt: (25 to: 31)) add:
		(aPortfolio
			cover: (38 to: 47)
			declaredAt: (10 to: 19)) ] valueCoveringAll:
		{33 to: 36}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	(self coverAll:
		{28 to: 31}) =
		(anAccount
			cover: (35 to: 43)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{33 to: 33}.! !
!Behavior method!
netTransferValue
	^ [
	([
	(NetTransferValueVisitor
		cover: (24 to: 46)
		declaredAt: (24 to: 46)) for:
		(self coverAll:
			{53 to: 56}) ] valueCoveringAll:
		{48 to: 51}) netTransferValue ] valueCoveringAll:
		{59 to: 74}.! !
!Behavior method!
transactions
	| transactions |
	(transactions _ [
	(OrderedCollection
		cover: (53 to: 69)
		declaredAt: (53 to: 69)) new ] valueCoveringAll:
		{71 to: 73})
		cover: (37 to: 48)
		declaredAt: (19 to: 30).
	[
	(accounts
		cover: (77 to: 84)
		declaredAt: (77 to: 84)) do: [ :anAccount |
		[
		(anAccount
			cover: (105 to: 113)
			declaredAt: (93 to: 101)) addTransactionsTo:
			(transactions
				cover: (134 to: 145)
				declaredAt: (19 to: 30)) ] valueCoveringAll:
			{115 to: 132} ]] valueCoveringAll:
		{86 to: 88}.
	^ transactions
		cover: (154 to: 165)
		declaredAt: (19 to: 30).! !
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(accounts
		cover: (48 to: 55)
		declaredAt: (48 to: 55)) do: [ :anAccount |
		[
		(anAccount
			cover: (76 to: 84)
			declaredAt: (64 to: 72)) addTransactionsTo:
			(aCollectionOfTransactions
				cover: (105 to: 129)
				declaredAt: (20 to: 44)) ] valueCoveringAll:
			{86 to: 103} ]] valueCoveringAll:
		{57 to: 59}.! !
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(aCollectionOfTransactions
		cover: (48 to: 72)
		declaredAt: (20 to: 44)) addAll:
		(transactions
			cover: (82 to: 93)
			declaredAt: (82 to: 93)) ] valueCoveringAll:
		{74 to: 80}.! !

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!Behavior method!
balance
	^ [
	(accounts
		cover: (13 to: 20)
		declaredAt: (13 to: 20))
		sum: [ :anAccount |
			[
			(anAccount
				cover: (42 to: 50)
				declaredAt: (30 to: 38)) balance ] valueCoveringAll:
				{52 to: 58} ]
		ifEmpty: [
			0 coverAll:
				{73 to: 73} ]] valueCoveringAll:
		{22 to: 25. 62 to: 69}.! !

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:16:57'!
PASSED!
!ReceptiveAccount methodsFor: 'report' stamp: 'JPF 6/2/2021 19:18:04' prior: 50882681!
netTransferValue

	^ (NetTransferValueVisitor for: self) netTransferValue! !
!Account methodsFor: 'report' stamp: 'JPF 6/2/2021 19:18:09'!
netTransferValue

	^ (NetTransferValueVisitor for: self) netTransferValue! !

!methodRemoval: ReceptiveAccount #netTransferValue stamp: 'JPF 6/2/2021 19:18:09'!
netTransferValue

	^ (NetTransferValueVisitor for: self) netTransferValue!

!methodRemoval: Portfolio #netTransferValue stamp: 'JPF 6/2/2021 19:18:34'!
netTransferValue
	
	^ (NetTransferValueVisitor for: self) netTransferValue!

Object subclass: #AccountVisitor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:19:33'!
Object subclass: #AccountVisitor
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

AccountVisitor subclass: #SummaryVisitor
	instanceVariableNames: 'summary account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:19:51'!
AccountVisitor subclass: #SummaryVisitor
	instanceVariableNames: 'summary account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

AccountVisitor subclass: #NetTransferValueVisitor
	instanceVariableNames: 'account netTransferValue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #NetTransferValueVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:20:03'!
AccountVisitor subclass: #NetTransferValueVisitor
	instanceVariableNames: 'account netTransferValue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:22:06'!
visitDeposit
	
	^ self subclassResponsibility ! !
!AccountVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:22:12'!
visitWithdraw
	
	^ self subclassResponsibility ! !
!AccountVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:22:18'!
visitTransferEntry
	
	^ self subclassResponsibility ! !
!AccountVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:22:23'!
visitTransferOutput
	
	^ self subclassResponsibility ! !
!AccountVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:22:39'!
doOperation
	
	self subclassResponsibility ! !
!AccountVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:22:45' prior: 50885154!
doOperation
	
	self subclassResponsibility! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:22:48'!
PASSED!
!NetTransferValueVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:26:51' overrides: 50885159!
doOperation
	
	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	^ netTransferValue ! !
!Account methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:26:51' prior: 50885079!
netTransferValue

	^ (NetTransferValueVisitor for: self) doOperation! !

!methodRemoval: NetTransferValueVisitor #netTransferValue stamp: 'JPF 6/2/2021 19:26:51'!
netTransferValue
	
	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	^ netTransferValue !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:27:13'!
PASSED!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:27:15'!
PASSED!
!SummaryVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:28:20' overrides: 50885159!
doOperation

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !
!Account methodsFor: 'as yet unclassified' stamp: 'JPF 6/2/2021 19:28:20' prior: 50882223!
summary

	^ (SummaryVisitor for: self) doOperation! !

!methodRemoval: SummaryVisitor #summary stamp: 'JPF 6/2/2021 19:28:20'!
summary

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		].
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:28:29'!
PASSED!
!NetTransferValueVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:29:58'!
visitTransactions

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		]! !
!NetTransferValueVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:29:58' prior: 50885339 overrides: 50885159!
doOperation
	
	self visitTransactions.
	
	^ netTransferValue ! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:30:12'!
PASSED!
!SummaryVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:31:29'!
visitTransactions

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		]! !
!SummaryVisitor methodsFor: 'operation' stamp: 'JPF 6/2/2021 19:31:29' prior: 50885584 overrides: 50885159!
doOperation

	self visitTransactions.
	
	summary add: 'Balance = ', account balance asString.
	
	^ summary
	
	
	! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:31:36'!
PASSED!

!classDefinition: #SummaryVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:33:02'!
AccountVisitor subclass: #SummaryVisitor
	instanceVariableNames: 'summary'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #NetTransferValueVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:33:02'!
AccountVisitor subclass: #NetTransferValueVisitor
	instanceVariableNames: 'netTransferValue'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #AccountVisitor category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:33:02'!
Object subclass: #AccountVisitor
	instanceVariableNames: 'account'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!AccountVisitor methodsFor: 'visit transaction - private' stamp: 'JPF 6/2/2021 19:33:26'!
visitTransactions

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		]! !

!methodRemoval: NetTransferValueVisitor #visitTransactions stamp: 'JPF 6/2/2021 19:33:26'!
visitTransactions

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		]!

!methodRemoval: SummaryVisitor #visitTransactions stamp: 'JPF 6/2/2021 19:33:35'!
visitTransactions

	| transactionIterator |
	
	transactionIterator _ account transactionIterator.
	
	[ transactionIterator hasNext ] whileTrue: [ | currentTransaction |
		currentTransaction _ transactionIterator next.
		currentTransaction accept: self
		]!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:33:39'!
PASSED!

!methodRemoval: Deposit #lineForSummary stamp: 'JPF 6/2/2021 19:34:24'!
lineForSummary
	
	^ 'Depósito por ' , value asString , '.'!

!methodRemoval: TransferEntry #lineForSummary stamp: 'JPF 6/2/2021 19:34:31'!
lineForSummary
	
	^ 'Entrada por transferencia de ' , self value asString , '.'!

!methodRemoval: TransferOutput #lineForSummary stamp: 'JPF 6/2/2021 19:34:36'!
lineForSummary
	
	^ 'Salida por transferencia de ' , self value asString , '.'!

!methodRemoval: Withdraw #lineForSummary stamp: 'JPF 6/2/2021 19:34:41'!
lineForSummary
	
	^ 'Extracción por ' , value asString , '.'!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:34:46'!
PASSED!

AccountTransaction subclass: #TransferLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferLeg category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:36:55'!
AccountTransaction subclass: #TransferLeg
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

TransferLeg subclass: #TransferOutput
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferOutput category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:37:08'!
TransferLeg subclass: #TransferOutput
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

TransferLeg subclass: #TransferEntry
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferEntry category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:37:34'!
TransferLeg subclass: #TransferEntry
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:37:39'!
PASSED!

----SNAPSHOT----(2 June 2021 19:37:47) Portfolio2.image priorSource: 17608270!

!classDefinition: #TransferOutput category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:39:02'!
TransferLeg subclass: #TransferOutput
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferEntry category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:39:02'!
TransferLeg subclass: #TransferEntry
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!

!classDefinition: #TransferLeg category: 'Portfolio-Solucion' stamp: 'JPF 6/2/2021 19:39:03'!
AccountTransaction subclass: #TransferLeg
	instanceVariableNames: 'transfer'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'Portfolio-Solucion'!
!TransferLeg methodsFor: 'transfer' stamp: 'JPF 6/2/2021 19:39:10'!
transfer

	^transfer! !

!methodRemoval: TransferEntry #transfer stamp: 'JPF 6/2/2021 19:39:10'!
transfer

	^transfer!

!methodRemoval: TransferOutput #transfer stamp: 'JPF 6/2/2021 19:39:23'!
transfer
	
	^transfer!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:39:29'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:39:30'!
PASSED!
!TransferLeg class methodsFor: 'instance creation' stamp: 'JPF 6/2/2021 19:41:20'!
for: aTransfer

	^ self new initializeFor: aTransfer! !

!methodRemoval: TransferEntry class #for: stamp: 'JPF 6/2/2021 19:41:20'!
for: aTransfer

	^ self new initializeFor: aTransfer!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:41:29'!
PASSED!
!TransferLeg methodsFor: 'initialization' stamp: 'JPF 6/2/2021 19:41:58'!
initializeFor: aTransfer

	transfer := aTransfer ! !

!methodRemoval: TransferEntry #initializeFor: stamp: 'JPF 6/2/2021 19:41:58'!
initializeFor: aTransfer

	transfer := aTransfer !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:42:04'!
PASSED!

!methodRemoval: TransferOutput #initializeFor: stamp: 'JPF 6/2/2021 19:42:40'!
initializeFor: aTransfer

	transfer := aTransfer !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:42:54'!
PASSED!
!TransferLeg methodsFor: 'value' stamp: 'JPF 6/2/2021 19:43:09' overrides: 50877823!
value
	
	^ transfer value! !

!methodRemoval: TransferEntry #value stamp: 'JPF 6/2/2021 19:43:09'!
value
	
	^ transfer value!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:43:18'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:43:19'!
PASSED!

!methodRemoval: TransferOutput #value stamp: 'JPF 6/2/2021 19:43:27'!
value
	
	^ transfer value!

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:43:33'!
PASSED!
!Behavior method!
initialize
	(accounts _ [
	(OrderedCollection
		cover: (26 to: 42)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{44 to: 46})
		cover: (14 to: 21)
		declaredAt: (14 to: 21).
	(parents _ [
	(OrderedCollection
		cover: (61 to: 77)
		declaredAt: (26 to: 42)) new ] valueCoveringAll:
		{79 to: 81})
		cover: (50 to: 56)
		declaredAt: (50 to: 56).! !
!Behavior method!
balance
	^ [
	(accounts
		cover: (13 to: 20)
		declaredAt: (13 to: 20))
		sum: [ :anAccount |
			[
			(anAccount
				cover: (42 to: 50)
				declaredAt: (30 to: 38)) balance ] valueCoveringAll:
				{52 to: 58} ]
		ifEmpty: [
			0 coverAll:
				{73 to: 73} ]] valueCoveringAll:
		{22 to: 25. 62 to: 69}.! !

!testRun: #PortfolioTest #test01BalanceOfPortfolioWithoutAccountsIsZero stamp: 'JPF 6/2/2021 19:48:52'!
PASSED!
!Behavior method!
initialize
	[ super initialize ] valueCoveringAll:
		{20 to: 29}.
	(transactions _ [
	(OrderedCollection
		cover: (49 to: 65)
		declaredAt: (49 to: 65)) new ] valueCoveringAll:
		{67 to: 69})
		cover: (33 to: 44)
		declaredAt: (33 to: 44).! !
!Behavior method!
register: aValue on: account
	| transaction |
	(transaction _ [
	(self coverAll:
		{66 to: 69}) for:
		(aValue
			cover: (76 to: 81)
			declaredAt: (11 to: 16)) ] valueCoveringAll:
		{71 to: 74})
		cover: (51 to: 61)
		declaredAt: (34 to: 44).
	[
	(account
		cover: (85 to: 91)
		declaredAt: (22 to: 28)) register:
		(transaction
			cover: (103 to: 113)
			declaredAt: (34 to: 44)) ] valueCoveringAll:
		{93 to: 101}.
	^ transaction
		cover: (122 to: 132)
		declaredAt: (34 to: 44).! !
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
register: aTransaction
	[
	(transactions
		cover: (26 to: 37)
		declaredAt: (26 to: 37)) add:
		(aTransaction
			cover: (44 to: 55)
			declaredAt: (11 to: 22)) ] valueCoveringAll:
		{39 to: 42}.! !
!Behavior method!
with: anAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{32 to: 45}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{50 to: 57} ] value.! !
!Behavior method!
add: accountToAdd
	[
	(self coverAll:
		{21 to: 24}) assertCanAdd:
		(accountToAdd
			cover: (40 to: 51)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{26 to: 38}.
	[
	(accounts
		cover: (58 to: 65)
		declaredAt: (58 to: 65)) add:
		(accountToAdd
			cover: (72 to: 83)
			declaredAt: (6 to: 17)) ] valueCoveringAll:
		{67 to: 70}.
	[
	(accountToAdd
		cover: (87 to: 98)
		declaredAt: (6 to: 17)) addedTo:
		(self coverAll:
			{109 to: 112}) ] valueCoveringAll:
		{100 to: 107}.! !
!Behavior method!
assertCanAdd: accountToAdd
	[
	([
	(self coverAll:
		{31 to: 34}) anyRootParentIsComposedBy:
		(accountToAdd
			cover: (63 to: 74)
			declaredAt: (15 to: 26)) ] valueCoveringAll:
		{36 to: 61}) ifTrue: [
		[
		(self coverAll:
			{87 to: 90}) signalCanNotAddAccount ] valueCoveringAll:
			{92 to: 113} ]] valueCoveringAll:
		{77 to: 83}.! !
!Behavior method!
anyRootParentIsComposedBy: accountToAdd
	^ [
	([
	(self coverAll:
		{44 to: 47}) rootParents ] valueCoveringAll:
		{49 to: 59}) anySatisfy: [ :aParent |
		[
		(aParent
			cover: (86 to: 92)
			declaredAt: (76 to: 82)) isComposedBy:
			(accountToAdd
				cover: (108 to: 119)
				declaredAt: (28 to: 39)) ] valueCoveringAll:
			{94 to: 106} ]] valueCoveringAll:
		{61 to: 71}.! !
!Behavior method!
rootParents
	| rootParents |
	(rootParents _ [
	(Set
		cover: (50 to: 52)
		declaredAt: (50 to: 52)) new ] valueCoveringAll:
		{54 to: 56})
		cover: (35 to: 45)
		declaredAt: (18 to: 28).
	[
	(self coverAll:
		{60 to: 63}) addRootParentsTo:
		(rootParents
			cover: (83 to: 93)
			declaredAt: (18 to: 28)) ] valueCoveringAll:
		{65 to: 81}.
	^ rootParents
		cover: (101 to: 111)
		declaredAt: (18 to: 28).! !
!Behavior method!
addRootParentsTo: rootParents
	[
	(parents
		cover: (33 to: 39)
		declaredAt: (33 to: 39))
		ifEmpty: [
			[
			(rootParents
				cover: (55 to: 65)
				declaredAt: (19 to: 29)) add:
				(self coverAll:
					{72 to: 75}) ] valueCoveringAll:
				{67 to: 70} ]
		ifNotEmpty: [
			[
			(parents
				cover: (96 to: 102)
				declaredAt: (33 to: 39)) do: [ :aParent |
				[
				(aParent
					cover: (121 to: 127)
					declaredAt: (111 to: 117)) addRootParentsTo:
					(rootParents
						cover: (147 to: 157)
						declaredAt: (19 to: 29)) ] valueCoveringAll:
					{129 to: 145} ]] valueCoveringAll:
				{104 to: 106} ]] valueCoveringAll:
		{44 to: 51. 82 to: 92}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	([
	(self coverAll:
		{29 to: 32}) =
		(anAccount
			cover: (36 to: 44)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{34 to: 34}) or: [
		[
		(accounts
			cover: (52 to: 59)
			declaredAt: (52 to: 59)) anySatisfy: [ :composedAccount |
			[
			([
			(composedAccount
				cover: (95 to: 109)
				declaredAt: (76 to: 90)) isComposedBy:
				(anAccount
					cover: (125 to: 133)
					declaredAt: (15 to: 23)) ] valueCoveringAll:
				{111 to: 123}) or: [
				[
				(anAccount
					cover: (142 to: 150)
					declaredAt: (15 to: 23)) isComposedBy:
					(composedAccount
						cover: (166 to: 180)
						declaredAt: (76 to: 90)) ] valueCoveringAll:
					{152 to: 164} ]] valueCoveringAll:
				{136 to: 138} ]] valueCoveringAll:
			{61 to: 71} ]] valueCoveringAll:
		{46 to: 48}.! !
!Behavior method!
addedTo: aPortfolio
	^ self.! !
!Behavior method!
balance
	^ [
	(transactions
		cover: (12 to: 23)
		declaredAt: (12 to: 23))
		inject:
			(0 coverAll:
				{36 to: 36})
		into: [ :currentBalance :transaction |
			[
			(transaction
				cover: (79 to: 89)
				declaredAt: (65 to: 75)) affectBalance:
				(currentBalance
					cover: (106 to: 119)
					declaredAt: (49 to: 62)) ] valueCoveringAll:
				{91 to: 104} ]] valueCoveringAll:
		{28 to: 34. 40 to: 44}.! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #PortfolioTest #test02BalanceOfPortfolioWithAccountsIsSumOfAccountsBalance stamp: 'JPF 6/2/2021 19:48:52'!
PASSED!
!Behavior method!
for: aValue
	^ [
	([
	(self coverAll:
		{17 to: 20}) new ] valueCoveringAll:
		{22 to: 24}) initializeFor:
		(aValue
			cover: (41 to: 46)
			declaredAt: (6 to: 11)) ] valueCoveringAll:
		{26 to: 39}.! !
!Behavior method!
initializeFor: aValue
	(value _ aValue
		cover: (34 to: 39)
		declaredAt: (16 to: 21))
		cover: (25 to: 29)
		declaredAt: (25 to: 29).! !
!Behavior method!
with: anAccount with: anotherAccount
	^ [ | cascadeReceiver |
	cascadeReceiver _ [
	(self coverAll:
		{41 to: 44}) new ] valueCoveringAll:
		{46 to: 48}.
	[ cascadeReceiver add: anAccount ] valueCoveringAll:
		{53 to: 66}.
	[ cascadeReceiver add: anotherAccount ] valueCoveringAll:
		{71 to: 89}.
	[ cascadeReceiver yourself ] valueCoveringAll:
		{94 to: 101} ] value.! !
!Behavior method!
addedTo: aPortfolio
	[
	(parents
		cover: (25 to: 31)
		declaredAt: (25 to: 31)) add:
		(aPortfolio
			cover: (38 to: 47)
			declaredAt: (10 to: 19)) ] valueCoveringAll:
		{33 to: 36}.! !
!Behavior method!
isComposedBy: anAccount
	^ [
	(self coverAll:
		{28 to: 31}) =
		(anAccount
			cover: (35 to: 43)
			declaredAt: (15 to: 23)) ] valueCoveringAll:
		{33 to: 33}.! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		(value
			cover: (41 to: 45)
			declaredAt: (41 to: 45)) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #PortfolioTest #test03BalanceOfPortfolioIsCalculatedRecursivelyOnPortfolios stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
hasRegistered: aTransaction
	^ [
	(accounts
		cover: (32 to: 39)
		declaredAt: (32 to: 39)) anySatisfy: [ :anAccount |
		[
		(anAccount
			cover: (68 to: 76)
			declaredAt: (56 to: 64)) hasRegistered:
			(aTransaction
				cover: (93 to: 104)
				declaredAt: (16 to: 27)) ] valueCoveringAll:
			{78 to: 91} ]] valueCoveringAll:
		{41 to: 51}.! !

!testRun: #PortfolioTest #test04PortfolioWithoutAccountsHasNoRegisteredTransaction stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
hasRegistered: aTransaction
	^ [
	(transactions
		cover: (33 to: 44)
		declaredAt: (33 to: 44)) includes:
		(aTransaction
			cover: (56 to: 67)
			declaredAt: (16 to: 27)) ] valueCoveringAll:
		{46 to: 54}.! !

!testRun: #PortfolioTest #test05PortfolioHasRegisteredItsAccountsTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #PortfolioTest #test06PortfolioLooksForRegisteredTransactionsRecursively stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
transactions
	| transactions |
	(transactions _ [
	(OrderedCollection
		cover: (53 to: 69)
		declaredAt: (53 to: 69)) new ] valueCoveringAll:
		{71 to: 73})
		cover: (37 to: 48)
		declaredAt: (19 to: 30).
	[
	(accounts
		cover: (77 to: 84)
		declaredAt: (77 to: 84)) do: [ :anAccount |
		[
		(anAccount
			cover: (105 to: 113)
			declaredAt: (93 to: 101)) addTransactionsTo:
			(transactions
				cover: (134 to: 145)
				declaredAt: (19 to: 30)) ] valueCoveringAll:
			{115 to: 132} ]] valueCoveringAll:
		{86 to: 88}.
	^ transactions
		cover: (154 to: 165)
		declaredAt: (19 to: 30).! !

!testRun: #PortfolioTest #test07PortfolioHasNoTransactionWhenHasNoAccounts stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(aCollectionOfTransactions
		cover: (48 to: 72)
		declaredAt: (20 to: 44)) addAll:
		(transactions
			cover: (82 to: 93)
			declaredAt: (82 to: 93)) ] valueCoveringAll:
		{74 to: 80}.! !

!testRun: #PortfolioTest #test08PortfolioTransactionsIncludesAllItsAccountsTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
addTransactionsTo: aCollectionOfTransactions
	[
	(accounts
		cover: (48 to: 55)
		declaredAt: (48 to: 55)) do: [ :anAccount |
		[
		(anAccount
			cover: (76 to: 84)
			declaredAt: (64 to: 72)) addTransactionsTo:
			(aCollectionOfTransactions
				cover: (105 to: 129)
				declaredAt: (20 to: 44)) ] valueCoveringAll:
			{86 to: 103} ]] valueCoveringAll:
		{57 to: 59}.! !

!testRun: #PortfolioTest #test09PortfolioTransactionsAreCalculatedRecursively stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
signalCanNotAddAccount
	[
	(self coverAll:
		{27 to: 30}) error:
		([
		([
		(self coverAll:
			{39 to: 42}) class ] valueCoveringAll:
			{44 to: 48}) canNotAddAccountErrorMessage ] valueCoveringAll:
			{50 to: 77}) ] valueCoveringAll:
		{32 to: 37}.! !
!Behavior method!
canNotAddAccountErrorMessage
	^ 'Can not add repeated account to a portfolio' coverAll:
		{34 to: 78}.! !
!Behavior method!
accountsSize
	^ [
	(accounts
		cover: (18 to: 25)
		declaredAt: (18 to: 25)) size ] valueCoveringAll:
		{27 to: 30}.! !
!Behavior method!
accountsIncludes: anAccount
	^ [
	(accounts
		cover: (32 to: 39)
		declaredAt: (32 to: 39)) includes:
		(anAccount
			cover: (51 to: 59)
			declaredAt: (19 to: 27)) ] valueCoveringAll:
		{41 to: 49}.! !

!testRun: #PortfolioTest #test10PortfolioCanNotIncludeTheSameAccountMoreThanOnce stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #PortfolioTest #test11PortfolioCanNotIncludeAccountOfItsPortfolios stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #PortfolioTest #test12PortfolioCanNotIncludeItself stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
accountsIsEmpty
	^ [
	(accounts
		cover: (21 to: 28)
		declaredAt: (21 to: 28)) isEmpty ] valueCoveringAll:
		{30 to: 36}.! !

!testRun: #PortfolioTest #test13ComposedPortfolioCanNotHaveParentPortfolioAccount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #PortfolioTest #test14ComposedPortfolioCanNotHaveAccountOfAnyRootParentRecursively stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #PortfolioTest #test15PortfolioCanNotIncludeAnyOfTheComposedAccountOfPortfolioToAdd stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReceptiveAccountTest #test01ReceptiveAccountHaveZeroAsBalanceWhenCreated stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReceptiveAccountTest #test02DepositIncreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReceptiveAccountTest #test03WithdrawDecreasesBalanceOnTransactionValue stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReceptiveAccountTest #test04WithdrawValueMustBePositive stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReceptiveAccountTest #test05ReceptiveAccountKnowsRegisteredTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReceptiveAccountTest #test06ReceptiveAccountDoNotKnowNotRegisteredTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
transactions
	^ [
	(transactions
		cover: (19 to: 30)
		declaredAt: (19 to: 30)) copy ] valueCoveringAll:
		{32 to: 35}.! !

!testRun: #ReceptiveAccountTest #test07AccountKnowsItsTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
netTransferValue
	^ [
	([
	(NetTransferValueVisitor
		cover: (23 to: 45)
		declaredAt: (23 to: 45)) for:
		(self coverAll:
			{52 to: 55}) ] valueCoveringAll:
		{47 to: 50}) doOperation ] valueCoveringAll:
		{58 to: 68}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(netTransferValue _ 0 coverAll:
		{71 to: 72})
		cover: (52 to: 67)
		declaredAt: (52 to: 67).! !
!Behavior method!
doOperation
	[
	(self coverAll:
		{16 to: 19}) visitTransactions ] valueCoveringAll:
		{21 to: 37}.
	^ netTransferValue
		cover: (45 to: 60)
		declaredAt: (45 to: 60).! !
!Behavior method!
visitTransactions
	| transactionIterator |
	(transactionIterator _ [
	(account
		cover: (70 to: 76)
		declaredAt: (70 to: 76)) transactionIterator ] valueCoveringAll:
		{78 to: 96})
		cover: (48 to: 66)
		declaredAt: (23 to: 41).
	[
	[
	[
	(transactionIterator
		cover: (104 to: 122)
		declaredAt: (23 to: 41)) hasNext ] valueCoveringAll:
		{124 to: 130} ] whileTrue: [ | currentTransaction |
		(currentTransaction _ [
		(transactionIterator
			cover: (193 to: 211)
			declaredAt: (23 to: 41)) next ] valueCoveringAll:
			{213 to: 216})
			cover: (172 to: 189)
			declaredAt: (149 to: 166).
		[
		(currentTransaction
			cover: (221 to: 238)
			declaredAt: (149 to: 166)) accept:
			(self coverAll:
				{248 to: 251}) ] valueCoveringAll:
			{240 to: 246} ]] valueCoveringAll:
		{134 to: 143}.! !
!Behavior method!
transactionIterator
	^ [
	(TransactionIterator
		cover: (26 to: 44)
		declaredAt: (26 to: 44)) with:
		([
		(self coverAll:
			{52 to: 55}) transactions ] valueCoveringAll:
			{57 to: 68}) ] valueCoveringAll:
		{46 to: 50}.! !
!Behavior method!
with: transactions
	^ [
	([
	(self coverAll:
		{25 to: 28}) new ] valueCoveringAll:
		{30 to: 32}) initializeWith:
		(transactions
			cover: (50 to: 61)
			declaredAt: (7 to: 18)) ] valueCoveringAll:
		{34 to: 48}.! !
!Behavior method!
initializeWith: transactionCollection
	(transactions _ transactionCollection
		cover: (57 to: 77)
		declaredAt: (17 to: 37))
		cover: (42 to: 53)
		declaredAt: (42 to: 53).
	(index _ 1 coverAll:
		{88 to: 89})
		cover: (81 to: 85)
		declaredAt: (81 to: 85).! !
!Behavior method!
hasNext
	^ [
	(index
		cover: (14 to: 18)
		declaredAt: (14 to: 18)) <=
		([
		(transactions
			cover: (23 to: 34)
			declaredAt: (23 to: 34)) size ] valueCoveringAll:
			{36 to: 39}) ] valueCoveringAll:
		{20 to: 21}.! !
!Behavior method!
next
	| currentTransaction |
	[
	(self coverAll:
		{35 to: 38}) assertHasNext ] valueCoveringAll:
		{40 to: 52}.
	(currentTransaction _ [
	(transactions
		cover: (79 to: 90)
		declaredAt: (79 to: 90)) at:
		(index
			cover: (96 to: 100)
			declaredAt: (96 to: 100)) ] valueCoveringAll:
		{92 to: 94})
		cover: (58 to: 75)
		declaredAt: (11 to: 28).
	(index _ [
	(index
		cover: (104 to: 108)
		declaredAt: (96 to: 100)) +
		(1 coverAll:
			{120 to: 120}) ] valueCoveringAll:
		{118 to: 118})
		cover: (112 to: 116)
		declaredAt: (96 to: 100).
	^ currentTransaction
		cover: (128 to: 145)
		declaredAt: (11 to: 28).! !
!Behavior method!
assertHasNext
	^ [
	([
	(self coverAll:
		{20 to: 23}) hasNext ] valueCoveringAll:
		{25 to: 31}) ifFalse: [
		[
		(self coverAll:
			{45 to: 48}) error:
			([
			([
			(self coverAll:
				{57 to: 60}) class ] valueCoveringAll:
				{62 to: 66}) notNextTransationErrorDescription ] valueCoveringAll:
				{68 to: 100}) ] valueCoveringAll:
			{50 to: 55} ]] valueCoveringAll:
		{34 to: 41}.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitDeposit:
		(self coverAll:
			{44 to: 47}) ] valueCoveringAll:
		{30 to: 42}.! !
!Behavior method!
visitDeposit: aDeposit
	^ self.! !

!testRun: #ReportTest #test01ShouldInform0ForAnAccountWithoutTransfers stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
summary
	^ [
	([
	(SummaryVisitor
		cover: (14 to: 27)
		declaredAt: (14 to: 27)) for:
		(self coverAll:
			{34 to: 37}) ] valueCoveringAll:
		{29 to: 32}) doOperation ] valueCoveringAll:
		{40 to: 50}.! !
!Behavior method!
for: anAccount
	^ [
	([
	(self coverAll:
		{21 to: 24}) new ] valueCoveringAll:
		{26 to: 28}) initializeFor:
		(anAccount
			cover: (45 to: 53)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
initializeFor: anAccount
	(account _ anAccount
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (29 to: 35)
		declaredAt: (29 to: 35).
	(summary _ [
	(OrderedCollection
		cover: (63 to: 79)
		declaredAt: (63 to: 79)) new ] valueCoveringAll:
		{81 to: 83})
		cover: (52 to: 58)
		declaredAt: (52 to: 58).! !
!Behavior method!
doOperation
	[
	(self coverAll:
		{15 to: 18}) visitTransactions ] valueCoveringAll:
		{20 to: 36}.
	[
	(summary
		cover: (42 to: 48)
		declaredAt: (42 to: 48)) add:
		([
		('Balance = ' coverAll:
			{55 to: 66}) ,
			([
			([
			(account
				cover: (69 to: 75)
				declaredAt: (69 to: 75)) balance ] valueCoveringAll:
				{77 to: 83}) asString ] valueCoveringAll:
				{85 to: 92}) ] valueCoveringAll:
			{67 to: 67}) ] valueCoveringAll:
		{50 to: 53}.
	^ summary
		cover: (100 to: 106)
		declaredAt: (42 to: 48).! !

!testRun: #ReportTest #test01ShouldInformBalance0ForAnAccountWithoutTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
transfer: aValue to: targetReceptiveAccount
	| transfer |
	[
	(self coverAll:
		{65 to: 68}) assertSourceAndTargetAccountAreNotTheSameAccount:
		(targetReceptiveAccount
			cover: (120 to: 141)
			declaredAt: (22 to: 43)) ] valueCoveringAll:
		{70 to: 118}.
	[
	(self coverAll:
		{145 to: 148}) assertTheAmountTransferedIsValid:
		(aValue
			cover: (184 to: 189)
			declaredAt: (11 to: 16)) ] valueCoveringAll:
		{150 to: 182}.
	(transfer _ [
	(Transfer
		cover: (206 to: 213)
		declaredAt: (206 to: 213))
		for:
			(aValue
				cover: (220 to: 225)
				declaredAt: (11 to: 16))
		from:
			(self coverAll:
				{233 to: 236})
		to:
			(targetReceptiveAccount
				cover: (242 to: 263)
				declaredAt: (22 to: 43)) ] valueCoveringAll:
		{215 to: 218. 227 to: 231. 238 to: 240})
		cover: (195 to: 202)
		declaredAt: (51 to: 58).
	^ transfer
		cover: (271 to: 278)
		declaredAt: (51 to: 58).! !
!Behavior method!
assertSourceAndTargetAccountAreNotTheSameAccount: targetReceptiveAccount
	^ [
	([
	(targetReceptiveAccount
		cover: (79 to: 100)
		declaredAt: (51 to: 72)) =
		(self coverAll:
			{104 to: 107}) ] valueCoveringAll:
		{102 to: 102}) ifTrue: [
		[
		(self coverAll:
			{120 to: 123}) error:
			([
			([
			(self coverAll:
				{132 to: 135}) class ] valueCoveringAll:
				{137 to: 141}) transferToSourceAccountErrorDescription ] valueCoveringAll:
				{143 to: 181}) ] valueCoveringAll:
			{125 to: 130} ]] valueCoveringAll:
		{110 to: 116}.! !
!Behavior method!
assertTheAmountTransferedIsValid: aValue
	^ [
	([
	(aValue
		cover: (47 to: 52)
		declaredAt: (35 to: 40)) <=
		(0 coverAll:
			{57 to: 57}) ] valueCoveringAll:
		{54 to: 55}) ifTrue: [
		[
		(self coverAll:
			{70 to: 73}) error:
			([
			([
			(self coverAll:
				{82 to: 85}) class ] valueCoveringAll:
				{87 to: 91}) invalidAmountErrorDescription ] valueCoveringAll:
				{93 to: 121}) ] valueCoveringAll:
			{75 to: 80} ]] valueCoveringAll:
		{60 to: 66}.! !
!Behavior method!
for: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	^ [
	([
	(self coverAll:
		{76 to: 79}) new ] valueCoveringAll:
		{81 to: 83})
		initializeFor:
			(aValue
				cover: (100 to: 105)
				declaredAt: (6 to: 11))
		from:
			(aSourceReceptiveAccount
				cover: (113 to: 135)
				declaredAt: (19 to: 41))
		to:
			(aTargetReceptiveAccount
				cover: (141 to: 163)
				declaredAt: (47 to: 69)) ] valueCoveringAll:
		{85 to: 98. 107 to: 111. 137 to: 139}.! !
!Behavior method!
initializeFor: aValue from: aSourceReceptiveAccount to: aTargetReceptiveAccount
	(value _ aValue
		cover: (92 to: 97)
		declaredAt: (16 to: 21))
		cover: (83 to: 87)
		declaredAt: (83 to: 87).
	(output _ [
	(TransferOutput
		cover: (111 to: 124)
		declaredAt: (111 to: 124)) for:
		(self coverAll:
			{131 to: 134}) ] valueCoveringAll:
		{126 to: 129})
		cover: (101 to: 106)
		declaredAt: (101 to: 106).
	(entry _ [
	(TransferEntry
		cover: (147 to: 159)
		declaredAt: (147 to: 159)) for:
		(self coverAll:
			{166 to: 169}) ] valueCoveringAll:
		{161 to: 164})
		cover: (138 to: 142)
		declaredAt: (138 to: 142).
	[
	(aSourceReceptiveAccount
		cover: (175 to: 197)
		declaredAt: (29 to: 51)) register:
		(output
			cover: (209 to: 214)
			declaredAt: (101 to: 106)) ] valueCoveringAll:
		{199 to: 207}.
	[
	(aTargetReceptiveAccount
		cover: (218 to: 240)
		declaredAt: (57 to: 79)) register:
		(entry
			cover: (252 to: 256)
			declaredAt: (138 to: 142)) ] valueCoveringAll:
		{242 to: 250}.! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
initializeFor: aTransfer
	(transfer _ aTransfer
		cover: (40 to: 48)
		declaredAt: (16 to: 24))
		cover: (28 to: 35)
		declaredAt: (28 to: 35).! !
!Behavior method!
for: aTransfer
	^ [
	([
	(self coverAll:
		{20 to: 23}) new ] valueCoveringAll:
		{25 to: 27}) initializeFor:
		(aTransfer
			cover: (44 to: 52)
			declaredAt: (6 to: 14)) ] valueCoveringAll:
		{29 to: 42}.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitWithdraw:
		(self coverAll:
			{45 to: 48}) ] valueCoveringAll:
		{30 to: 43}.! !
!Behavior method!
visitWithdraw: aWithdraw
	^ self.! !
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferEntry:
		(self coverAll:
			{50 to: 53}) ] valueCoveringAll:
		{30 to: 48}.! !
!Behavior method!
visitTransferEntry: aTransferEntry
	(netTransferValue _ [
	(aTransferEntry
		cover: (57 to: 70)
		declaredAt: (21 to: 34)) affectBalance:
		(netTransferValue
			cover: (38 to: 53)
			declaredAt: (38 to: 53)) ] valueCoveringAll:
		{72 to: 85})
		cover: (87 to: 102)
		declaredAt: (38 to: 53).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) +
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !
!Behavior method!
value
	^ [
	(transfer
		cover: (12 to: 19)
		declaredAt: (12 to: 19)) value ] valueCoveringAll:
		{21 to: 25}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReportTest #test02ShouldInform50ForAnAccountWithA50TransferEntry stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
visitDeposit: aDeposit
	[
	(summary
		cover: (27 to: 33)
		declaredAt: (27 to: 33)) add:
		([
		([
		('Depósito por ' coverAll:
			{40 to: 54}) ,
			([
			([
			(aDeposit
				cover: (58 to: 65)
				declaredAt: (15 to: 22)) value ] valueCoveringAll:
				{67 to: 71}) asString ] valueCoveringAll:
				{73 to: 80}) ] valueCoveringAll:
			{56 to: 56}) ,
			('.' coverAll:
				{84 to: 86}) ] valueCoveringAll:
			{82 to: 82}) ] valueCoveringAll:
		{35 to: 38}.! !
!Behavior method!
value
	^ value
		cover: (11 to: 15)
		declaredAt: (11 to: 15).! !

!testRun: #ReportTest #test02ShouldInformBalance50AndA50DepositForAnAccountWithA50Deposit stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
accept: aVisitor
	[
	(aVisitor
		cover: (21 to: 28)
		declaredAt: (9 to: 16)) visitTransferOutput:
		(self coverAll:
			{51 to: 54}) ] valueCoveringAll:
		{30 to: 49}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	(netTransferValue _ [
	(aTransferOutput
		cover: (59 to: 73)
		declaredAt: (22 to: 36)) affectBalance:
		(netTransferValue
			cover: (40 to: 55)
			declaredAt: (40 to: 55)) ] valueCoveringAll:
		{75 to: 88})
		cover: (90 to: 105)
		declaredAt: (40 to: 55).! !
!Behavior method!
affectBalance: aBalance
	^ [
	(aBalance
		cover: (30 to: 37)
		declaredAt: (16 to: 23)) -
		([
		(self coverAll:
			{41 to: 44}) value ] valueCoveringAll:
			{46 to: 50}) ] valueCoveringAll:
		{39 to: 39}.! !

!testRun: #ReportTest #test03ShouldInform10ForAnAccountWithA50TransferEntryAnd40TransferOutput stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
visitWithdraw: aWithdraw
	[
	(summary
		cover: (29 to: 35)
		declaredAt: (29 to: 35)) add:
		([
		([
		('Extracción por ' coverAll:
			{42 to: 58}) ,
			([
			([
			(aWithdraw
				cover: (62 to: 70)
				declaredAt: (16 to: 24)) value ] valueCoveringAll:
				{72 to: 76}) asString ] valueCoveringAll:
				{78 to: 85}) ] valueCoveringAll:
			{60 to: 60}) ,
			('.' coverAll:
				{89 to: 91}) ] valueCoveringAll:
			{87 to: 87}) ] valueCoveringAll:
		{37 to: 40}.! !

!testRun: #ReportTest #test03ShouldInformBalance0A50DepositA50WithdrawForAnAccountWithA50DepositAnd50Withdraw stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
visitTransferEntry: aTransferEntry
	[
	(summary
		cover: (39 to: 45)
		declaredAt: (39 to: 45)) add:
		([
		([
		('Entrada por transferencia de ' coverAll:
			{52 to: 82}) ,
			([
			([
			(aTransferEntry
				cover: (86 to: 99)
				declaredAt: (21 to: 34)) value ] valueCoveringAll:
				{101 to: 105}) asString ] valueCoveringAll:
				{107 to: 114}) ] valueCoveringAll:
			{84 to: 84}) ,
			('.' coverAll:
				{118 to: 120}) ] valueCoveringAll:
			{116 to: 116}) ] valueCoveringAll:
		{47 to: 50}.! !
!Behavior method!
visitTransferOutput: aTransferOutput
	[
	(summary
		cover: (41 to: 47)
		declaredAt: (41 to: 47)) add:
		([
		([
		('Salida por transferencia de ' coverAll:
			{54 to: 83}) ,
			([
			([
			(aTransferOutput
				cover: (87 to: 101)
				declaredAt: (22 to: 36)) value ] valueCoveringAll:
				{103 to: 107}) asString ] valueCoveringAll:
				{109 to: 116}) ] valueCoveringAll:
			{85 to: 85}) ,
			('.' coverAll:
				{120 to: 122}) ] valueCoveringAll:
			{118 to: 118}) ] valueCoveringAll:
		{49 to: 52}.! !

!testRun: #ReportTest #test04ShouldInformBalance0A50DepositA50WithdrawA50TransferEntryA50TransferOutputForAnAccountWithThoseTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReportTest #test04ShouldInformCorrectValueForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #ReportTest #test05ShouldInformCorrectBalanceForAPortfolioWithAReceptiveAccountAndAnotherPortfolioHavingAllTypeOfTransactions stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransactionIteratorTest #test01IteratorForAnAccountWithoutTransactionsHasNotNext stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransactionIteratorTest #test02IteratorForAnAccountWithOneTransactionHasNext stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransactionIteratorTest #test03IteratorForAnAccountWithOneTransactionHasNotNextWhenWasAskedForNextOnce stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransactionIteratorTest #test04IteratorForAnAccountWithOneTransactionShouldReturnThatTransactionWhenAskForNext stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
notNextTransationErrorDescription
	^ 'Cannot ask for next when iterator has not next' coverAll:
		{40 to: 87}.! !

!testRun: #TransactionIteratorTest #test05NextShouldRaiseAnErrorWhenHasNotNext stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransferTest #test01ShouldIncreaseTargetAccountBalanceAndDecreaseSourceAccountBalanceInTheSameAmount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransferTest #test02ShouldNotAddDepositsToTargetAccountOrWithdrawToSourceAccount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
output
	^ output
		cover: (13 to: 18)
		declaredAt: (13 to: 18).! !
!Behavior method!
entry
	^ entry
		cover: (12 to: 16)
		declaredAt: (12 to: 16).! !

!testRun: #TransferTest #test03ShouldReturnATransferWithTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
transfer
	^ transfer
		cover: (13 to: 20)
		declaredAt: (13 to: 20).! !

!testRun: #TransferTest #test04ShouldObtainTheSameTransferFromTheTransferOutputAndTheTransferEntry stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
transferToSourceAccountErrorDescription
	^ 'Cannot transfer to the source account' coverAll:
		{46 to: 84}.! !

!testRun: #TransferTest #test05ShouldRaiseAnErrorIfTheTargetAndSourceAccountAreTheSameAccount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!
!Behavior method!
invalidAmountErrorDescription
	^ 'Cannot transfer a negative amount' coverAll:
		{35 to: 69}.! !

!testRun: #TransferTest #test06ShouldRaiseAnErrorIfAnAccountTransferANegativeAmount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

!testRun: #TransferTest #test07ShouldRaiseAnErrorIfAnAccountTransferZeroAsAmount stamp: 'JPF 6/2/2021 19:48:53'!
PASSED!

----SNAPSHOT----(2 June 2021 19:52:50) Portfolio2.image priorSource: 17765266!